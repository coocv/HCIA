<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console", Consolas, "Courier", monospace; --title-bar-height: 20px ; }
.mac-os-11 { --title-bar-height: 28px ; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color) ; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace) ; }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace) ; }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill) ; }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color) ; }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


/* cyrillic-ext */
/* cyrillic */
/* greek-ext */
/* greek */
/* vietnamese */
/* latin-ext */
/* latin */
/* cyrillic-ext */
/* cyrillic */
/* greek-ext */
/* greek */
/* vietnamese */
/* latin-ext */
/* latin */
/* cyrillic-ext */
/* cyrillic */
/* greek-ext */
/* greek */
/* vietnamese */
/* latin-ext */
/* latin */
/* cyrillic-ext */
/* cyrillic */
/* greek-ext */
/* greek */
/* vietnamese */
/* latin-ext */
/* latin */
@font-face {
    font-family: 'Source Sans Pro';
    font-style: normal;
    font-weight: 600;
    src: local('Source Sans Pro SemiBold'), local('SourceSansPro-SemiBold'), url('file:///C://Users//cvcoo//AppData//Roaming//Typora/themes/vue/6xKydSBYKcSV-LCoeQqfX1RYOo3i54rwlxdu.woff2') format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}@import '';

:root {
    --side-bar-bg-color: #fff;
    --control-text-color: #777;
    --font-sans-serif: '苹果' 'Source Sans Pro', sans-serif !important;
    --font-monospace: '苹方', 'Roboto Mono', monospace !important;
}

html {
    font-size: 16px;
}

body {
    font-family: var(--font-sans-serif);
    color: #34495e;
    -webkit-font-smoothing: antialiased;
    line-height: 1.6rem;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

#write {
    max-width: 860px;
    margin: 0 auto;
    padding: 20px 30px 100px;
}

#write p {
    line-height: 1.6rem;
    word-spacing: .05rem;
}

#write ol li {
    padding-left: 0.5rem;
}

#write > ul:first-child,
#write > ol:first-child {
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}

body > *:last-child {
    margin-bottom: 0 !important;
}

a {
    color: #42b983;
    font-weight: 600;
    padding: 0 2px;
    text-decoration: none;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}

h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}

h1 tt,
h1 code {
    font-size: inherit !important;
}

h2 tt,
h2 code {
    font-size: inherit !important;
}

h3 tt,
h3 code {
    font-size: inherit !important;
}

h4 tt,
h4 code {
    font-size: inherit !important;
}

h5 tt,
h5 code {
    font-size: inherit !important;
}

h6 tt,
h6 code {
    font-size: inherit !important;
}

h2 a,
h3 a {
    color: #34495e;
}

h1 {
    padding-bottom: .4rem;
    font-size: 2.2rem;
    line-height: 1.3;
}

h2 {
    font-size: 1.75rem;
    line-height: 1.225;
    margin: 35px 0 15px;
    padding-bottom: 0.5em;
    border-bottom: 1px solid #ddd;
}

h3 {
    font-size: 1.4rem;
    line-height: 1.43;
    margin: 20px 0 7px;
}

h4 {
    font-size: 1.2rem;
}

h5 {
    font-size: 1rem;
}

h6 {
    font-size: 1rem;
    color: #777;
}

p,
blockquote,
ul,
ol,
dl,
table {
    margin: 0.8em 0;
}

li > ol,
li > ul {
    margin: 0 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}

body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}

li p.first {
    display: inline-block;
}

ul,
ol {
    padding-left: 30px;
}

ul:first-child,
ol:first-child {
    margin-top: 0;
}

ul:last-child,
ol:last-child {
    margin-bottom: 0;
}

blockquote {
    border-left: 4px solid #42b983;
    padding: 10px 15px;
    color: #777;
    background-color: rgba(66, 185, 131, .1);
}

table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}

table tr:nth-child(2n),
thead {
    background-color: #fafafa;
}

table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

#write strong {
    padding: 0 1px;
}

#write em {
    padding: 0 5px 0 2px;
}

#write table thead th {
    background-color: #f2f2f2;
}

#write .CodeMirror-gutters {
    border-right: none;
}

#write .md-fences {
    border: 1px solid #F4F4F4;
    -webkit-font-smoothing: initial;
    margin: 0.8rem 0 !important;
    padding: 0.3rem 0 !important;
    line-height: 1.43rem;
    background-color: #F8F8F8 !important;
    border-radius: 2px;
    font-family: var(--font-monospace);
    font-size: 0.85rem;
    word-wrap: normal;
}

#write .CodeMirror-wrap .CodeMirror-code pre {
    padding-left: 12px;
}

#write code, tt {
    padding: 2px 4px;
    border-radius: 2px;
    font-family: var(--font-monospace);
    font-size: 0.92rem;
    color: #e96900;
    background-color: #f8f8f8;
}

tt {
    margin: 0 2px;
}

#write .md-footnote {
    background-color: #f8f8f8;
    color: #e96900;
}

/* heighlight. */
#write mark {
    background-color: #EBFFEB;
    border-radius: 2px;
    padding: 2px 4px;
    margin: 0 2px;
    color: #222;
    font-weight: 500;
}

#write del {
    padding: 1px 2px;
}

.cm-s-inner .cm-link,
.cm-s-inner.cm-link {
    color: #22a2c9;
}

.cm-s-inner .cm-string {
    color: #22a2c9;
}

.md-task-list-item > input {
    margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }

    table,
    pre {
        page-break-inside: avoid;
    }

    pre {
        word-wrap: break-word;
    }
}

.md-fences {
    background-color: #f8f8f8;
}

.md-diagram-panel {
    position: static !important;
}

#write pre.md-meta-block {
    padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
    bottom: .375rem;
}

#write > h3.md-focus:before {
    left: -1.5625rem;
    top: .375rem;
}

#write > h4.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

#write > h5.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

#write > h6.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

.md-image > .md-meta {
    border-radius: 3px;
    font-family: var(--font-monospace);
    padding: 2px 0 0 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: inherit;
}

.md-toc {
    margin-top: 20px;
    padding-bottom: 20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

/** focus mode */

.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: var(--font-sans-serif);
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4874d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

body {
	font-family: '苹方';
  }

</style><title>ENSP</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='hcia数据通信基础'><span>HCIA数据通信基础</span></h1><h2 id='物理层'><span>物理层</span></h2><h3 id='双绞线'><span>双绞线</span></h3><blockquote><p><span>8bit 为一个字节</span>
<span>一个字母 1个字节</span>
<span>一个汉字 2个字节</span>
<span>传输速度：兆（Mbps）</span>
<span>下载速度为传输速度的1/8</span></p></blockquote><figure><table><thead><tr><th><strong><span>版本种类</span></strong><span>（数字越大，版本越新）</span></th><th>&nbsp;</th></tr></thead><tbody><tr><td><span>5类双绞线（标准双绞线）</span></td><td><span>100Mbps</span></td></tr><tr><td><span>超5类（5e）常见</span></td><td><span>1000Mbps</span></td></tr><tr><td><span>6类双绞线</span></td><td><span>1000Mbps以上</span></td></tr></tbody></table></figure><figure><table><thead><tr><th><span>以太网标准</span></th><th><span>线缆类别</span></th><th><span>最长有效传输距离</span></th></tr></thead><tbody><tr><td><span>10BASE-T</span></td><td><span>两对3/4/5类双绞线</span></td><td><span>100米</span></td></tr><tr><td><span>100BASE-TX</span></td><td><span>两对5类双绞线</span></td><td><span>100米</span></td></tr><tr><td><span>1000BASE-T</span></td><td><span>四对5e类双绞线</span></td><td><span>100米</span></td></tr></tbody></table></figure><h4 id='屏蔽与非屏蔽双绞线'><span>屏蔽与非屏蔽双绞线</span></h4><p><span>屏蔽：环境要求，接地</span>
<span>常见非屏蔽</span></p><h4 id='线序规格'><span>线序规格</span></h4><p><span>8根线芯</span></p><figure><table><thead><tr><th><span>1 2 3 4 5 6 7 8</span></th><th>&nbsp;</th></tr></thead><tbody><tr><td><span>1236</span></td><td><span>数据传输</span></td></tr><tr><td><span>45</span></td><td><span>语音电话</span></td></tr><tr><td><span>78</span></td><td><span>备用</span></td></tr><tr><td><span>56A</span></td><td><span>1 3 2 6 调换</span></td></tr><tr><td><span>56B</span></td><td><span>橙白 橙绿 白绿 蓝白 蓝棕 白棕</span></td></tr></tbody></table></figure><h3 id='光纤'><span>光纤</span></h3><blockquote><p><span>玻璃纤维 光的全反射</span>
<span>反射一种光源 单模</span>
<span>反射多种光源 多模</span>
<span>贵在接口，光纤要有专门的光模块，把光信号转换为电信号</span>
<span>黄色（单模）抗干扰性强 传输距离更长 家庭 有碰撞就会失真，丢包</span>
<span>橙色（多模）抗干扰性差 传输距离较长</span>
<span>水绿色 企业 光缆：传输距离长</span></p></blockquote><figure><table><thead><tr><th><span>以太网标准</span></th><th><span>线缆类别</span></th><th style='text-align:center;' ><span>最长有效传输距离</span></th></tr></thead><tbody><tr><td><span>10BASE-F</span></td><td><span>单模/多模光纤</span></td><td style='text-align:center;' ><span>2000 米</span></td></tr><tr><td><span>100BASE-FX</span></td><td><span>单模/多模光纤</span></td><td style='text-align:center;' ><span>2000 米</span></td></tr><tr><td><span>1000BASE-LX</span></td><td><span>单模/多模光纤</span></td><td style='text-align:center;' ><span>316 米</span></td></tr><tr><td><span>1000BASE-SX</span></td><td><span>多模光纤</span></td><td style='text-align:center;' ><span>316 米</span></td></tr></tbody></table></figure><h3 id='同轴电缆'><span>同轴电缆</span></h3><figure><table><thead><tr><th><span>以太网标准</span></th><th><span>电缆类别</span></th><th style='text-align:center;' ><span>最长有效传输距离</span></th></tr></thead><tbody><tr><td><span>10BASE5</span></td><td><span>粗同轴电缆</span></td><td style='text-align:center;' ><span>500米</span></td></tr><tr><td><span>10BASE2</span></td><td><span>细同轴电缆</span></td><td style='text-align:center;' ><span>185米</span></td></tr></tbody></table></figure><h3 id='console登录实验'><span>console登录实验</span></h3><h4 id='password'><span>password</span></h4><p><span>无用户名，一个设备只能设置一个密码，连续三次输错需要等待时间</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span><span class="cm-identifier">system-view</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#进入系统视图sys</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span><span class="cm-identifier">sysname</span> <span class="cm-identifier">R1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置路由器名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span><span class="cm-identifier">user-interface</span> <span class="cm-identifier">console</span> <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#进入控制台视图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-console0</span><span class="cm-punctuation">]</span><span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">password</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置认证方式为密码认证</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-console0</span><span class="cm-punctuation">]</span><span class="cm-builtin">set</span> <span class="cm-identifier">authentication</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-identifier">Huawei</span><span class="cm-variable-2">@123</span> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置认证密码为Huawei@123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-console0</span><span class="cm-punctuation">]</span><span class="cm-identifier">user</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-identifier">x</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#通常不进行权限设置，权限设置错误后果很严重</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-console0</span><span class="cm-punctuation">]</span><span class="cm-keyword">return</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#返回用户视图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span> <span class="cm-identifier">save</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#保存配置文件</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 366px;"></div><div class="CodeMirror-gutters" style="display: none; height: 366px;"></div></div></div></pre><p><span>如果想修改密码，可通过set authentication password cipher xxx设置（xxx代表需要修改的密码）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">user-interface</span> <span class="cm-identifier">console</span> <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#先进入到console 0口进行配置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ui-console0</span><span class="cm-punctuation">]</span><span class="cm-builtin">set</span> <span class="cm-identifier">authentication</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-identifier">admin1234</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#修改密码为admin1234</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h4 id='aaa'><span>aaa</span></h4><p><span>存放用户名和密码</span>
<span>使用AAA认证模式，配置使用用户名和密码登录console口，以及管理权限级别</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span> <span class="cm-identifier">user-interface</span> <span class="cm-identifier">console</span> <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置console 0口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ui-console0</span><span class="cm-punctuation">]</span> <span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">aaa</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置认证模式为aaa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span> <span class="cm-identifier">aaa</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#进入aaa模式下配置用户和权限</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">user</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-identifier">user123</span> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建用户user，密码user123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#如果需要修改密码，也可在此重新配置密码来修改。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Info</span><span class="cm-operator">:</span> <span class="cm-identifier">Add</span> <span class="cm-identifier">a</span> <span class="cm-identifier">new</span> <span class="cm-identifier">user</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">user</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-number">15</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置用户user的权限为level 15</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#此处用户等级有0-15共16级，可根据需要配置不同的用户使用不同的权限</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">a</span> <span class="cm-identifier">service-type</span> <span class="cm-identifier">terminal</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置协议服务类型 默认为 terminal终端</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 343px;"></div><div class="CodeMirror-gutters" style="display: none; height: 343px;"></div></div></div></pre><h4 id='none'><span>none</span></h4><p><span>在任何视图下查看配置</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">display</span> <span class="cm-identifier">current-configuration</span> &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#查看当前设备所有配置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">display</span> <span class="cm-identifier">this</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">#查看当前界面配置</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='双工模式'><span>双工模式</span></h3><div align="center">
<img width="400px" src="images/8481ff66ea06bff5743cb071e2bea09b048d72c2b5df455d7e339eeafd03f159.png">
</div><blockquote><p><span>双工模式：双向传输数据</span>
<span>单工模式：只能发送/接收数据 </span>&emsp;<span>如：收音机</span>
<span>半双工：能发送数据也能接收数据，但不能同时进行</span>&emsp;<span>如：对讲机</span>
<span>全双工：能发送数据也能接收数据，可以同时进行</span>
<span>两种双工模式都支持双向数据传输</span></p></blockquote><h3 id='冲突域'><span>冲突域</span></h3><blockquote><p><strong><span>在一个共享介质中所有产生冲突节点的集合</span></strong>
<strong><span>解决</span></strong><span>：载波监听/多路访问检测机制 CSMA/CD </span>&emsp;<span>通过部署交换机来解决</span>
<strong><span>工作原理</span></strong><span>：先听后发，边听边发，冲突停发，延迟后随机重发（通过这种方式避免冲突产生）</span>
<mark><span>交换机每个接口都是一个冲突域</span></mark></p></blockquote><h3 id='通过网络设备实现通信'><span>通过网络设备实现通信</span></h3><blockquote><p><strong><span>二层设备</span></strong><span>：OSI七层参考模型倒数第二层数据链路层</span>
<span>（看目的MAC地址  MAC地址表）</span>
<span>交换机：先看帧尾是否合法 再看帧头（源目MAC）</span>
<span>MAC地址表：MAC地址和交换机端口之间的映射关系</span>
<span>（MAC地址表在交换机中保存）</span>
<span>查看MAC地址表：display mac-address</span>
<strong><span>三层设备</span></strong><span>：工作在网络层 （看目的IP  路由表）</span>
<span>路由器、三层交换机（可以配置IP地址）</span></p></blockquote><hr /><h2 id='参考模型'><span>参考模型</span></h2><h3 id='osi七层参考模型'><span>OSI七层参考模型</span></h3><ul><li><span>应用层：提供网络接口(产生数据)</span></li><li><span>表示层：对数据格式化、加密，解密等操作</span></li><li><span>会话层：建立会话，维护、管理会话窗口</span></li><li><span>传输层：建立端到端连接（简单认为应用程序服务）端口号来确定服务</span></li><li><span>网络层：进行IP寻址和路由选择</span></li><li><span>数据链路层：建立设备与设备之间的连接（MAC标识目标设备）</span></li><li><span>物理层：以比特流形式在传输介质上进行传输</span></li></ul><h3 id='tcpip四层参考模型'><span>TCP/IP四层参考模型</span></h3><ul><li><span>应用层</span></li><li><span>传输层</span></li><li><span>网络层</span></li><li><span>网络接口层</span></li></ul><hr /><h2 id='数据链路层'><span>数据链路层</span></h2><h3 id='数据最终传输形式'><span>数据最终传输形式</span></h3><blockquote><p><mark><span>数据帧：数据帧头 + 数据包头（IP地址）+ 数据段头（端口号）+ DATA + 帧尾</span></mark>
<span>request请求包   </span>&emsp;<span>reply回应包</span>
<span>Src源 </span>&emsp;<span>Dst目的</span>
<span>Frame 物理层</span>
<span>帧头</span></p></blockquote><h3 id='数据封装过程'><span>数据封装过程</span></h3><ul><li><span>在应用层产生数据</span></li><li><span>在表示层对数据加密、解密</span></li><li><span>在会话层建立并维护会话窗口（数据DATA）</span></li><li><span>在传输层对数据加上段头（TCP头部 源目端口号）形成数据段</span></li><li><span>继续在网络层对数据段加上包头（源目IP）形成数据包</span></li><li><span>数据链路层 最后继续在数据包头前后分别加上帧头（源目MAC）和帧尾（帧校验）</span></li><li><span>物理层把封装好的数据包转变为电信号在网络中传输（比特流）</span></li></ul><h3 id='解封装过程'><span>解封装过程</span></h3><ul><li><span>物理层将电信号转为二进制数据（0101的比特高低电平）</span></li><li><span>数据链路层 查看MAC地址，地址为自己，则拆掉MAC头部，继续传输，不是自己则丢弃数据</span></li><li><span>网络层 查看IP，地址为自己则拆掉IP头部，继续传输，不是自己丢弃</span></li><li><span>传输层 查看段头，判断数据应该传到哪里，然后重组数据，传输到应用层</span></li><li><span>应用层 将二进制数据转换为原始数据</span></li></ul><h3 id='以太网帧格式'><span>以太网帧格式</span></h3><div align="center">
<img src="images/801903f0d8b556e560feb9c46f92c807f47353b06c00bfc7c8a7cff95c0a12b8.png">
</div><blockquote><p><strong><span>以太网II帧（Ethernet_II）</span></strong>
<span>数据帧头(源目MAC地址)+数据包头(IP地址)+数据段头(端口号)+DATA+帧尾(FCS)</span>
<span>type</span>
<span>0X0800 </span>&emsp;<span>IP协议帧</span>
<span>0X0806 </span>&emsp;<span>ARP协议帧</span>
<strong><span>802.3帧（IEEE 802.3）</span></strong></p></blockquote><h3 id='mac地址'><span>MAC地址</span></h3><blockquote><p><span>物理硬件地址（物理网卡）</span>
<span>用于唯一标识物理设备，无法修改</span>
<span>MAC地址：54-89-98-DF-78-9E</span>
<span>在设备上查看：5489：98DF：789E（冒分十六进制）</span>
<span>0101 0100-1000 1001-1001 1000…（十六进制第二位为偶数即为单播）</span>
<span>一个数字4bit，两个数字8bit，6个字节=48比特</span>
<span>前24比特 OUI组织分配（IEEE管理和分配）</span>
<span>后24比特 厂商自行分配</span>
<span>通过这个来全球唯一标识一个网卡MAC地址，无法修改，出厂自带（单播MAC）</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">PC&gt;ipconfig &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-comment">#查看网卡</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;display interface &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#查看路由器端口MAC</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='广播域'><span>广播域</span></h3><blockquote><p><span>一个BUM帧（广播帧、组播帧、单播帧　能够执行泛洪的帧）能够传递的范围，广播报文所能到达的范围</span>
<span>B：广播帧</span><br/><span>U：未知单播帧</span><br/><span>M：组播帧</span>
<mark><span>交换机无法隔离广播域，只有路由器可以隔离广播域</span></mark>
<span>广播域扩大容易造成信息泄露</span></p></blockquote><h3 id='广播域过大的影响'><span>广播域过大的影响</span></h3><blockquote><p><span>• 广播风暴，垃圾流量过多</span>
<span>• 信息安全</span></p></blockquote><h3 id='路由器如何解决限制广播域大小'><span>路由器如何解决限制广播域大小</span></h3><blockquote><p><span>• 通过部署路由器来隔离广播域</span>
<span>路由器每个接口都是广播域（路由器不会转发广播报文）</span>
<span>• 通过VLAN技术实现交换机来隔离广播域</span>
<span>注：交换机是用来隔离冲突域的，每个接口都是一个冲突域，无法隔离广播域</span></p><p><span>相同广播域之间可以直接二层通信</span>
<span>不同广播域之间不可以直接二层通信，需要借助三层设备进行三层通信</span>
<span>一个广播域就是一个网段</span></p></blockquote><h3 id='三种通讯模式'><span>三种通讯模式</span></h3><blockquote><p><span>单播：一对一</span>
<span>组播：一对多（一组特定成员）</span>
<span>广播：一对多（一对所有）</span></p><p><span>MAC地址第8比特位为0  单播MAC</span>
<span>MAC地址第8比特位为1  组播MAC</span>
<span>MAC地址全为1（全F）  广播MAC</span></p></blockquote><h3 id='telnet远程登录实验'><span>Telnet远程登录实验</span></h3><blockquote><p><span>前提：网络互通(能ping通地址)</span>
<span>R1 地址 远程登录</span>
<span>R2 地址 被远程登录</span></p></blockquote><h4 id='password模式'><span>password模式</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 306.812px; left: 298.547px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置Ip地址</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span> <span class="cm-identifier">user-interface</span> <span class="cm-identifier">vty</span> <span class="cm-number">0</span> <span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#进入vty接口视图，允许同时5台设备</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">authentication-mode</span> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#选择模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">user</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-identifier">x</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">#设置权限 (默认为0)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">protocol</span> <span class="cm-identifier">inbound</span> <span class="cm-identifier">telent</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">#默认telnet 不显示</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span> <span class="cm-identifier">telnet</span> <span class="cm-number">10.1.1.2</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#在其它设备用户视图下进行验证（在用户视图下进行telnet登录）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#R1 登陆方</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">进入用户视图（只能查看命令）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span><span class="cm-identifier">sys</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#进入系统视图 system-view</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span> <span class="cm-identifier">sysname</span> <span class="cm-identifier">R1</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-comment">#命名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span> <span class="cm-identifier">interface</span> <span class="cm-identifier">GigabitEtherent</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span> &nbsp; &nbsp;</span></pre><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-number">10.1.1.1</span> <span class="cm-number">24</span> &nbsp; &nbsp;<span class="cm-comment">#接口ip</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span> <span class="cm-identifier">display</span> <span class="cm-identifier">this</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">#查看状态</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">R1</span><span class="cm-operator">&gt;</span><span class="cm-identifier">ping</span> <span class="cm-number">10.1.1.2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">#用户系统视图都行</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">验证</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span><span class="cm-identifier">telnet</span> <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#远程登录协议</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span><span class="cm-identifier">telnet</span> <span class="cm-number">10.1.1.2</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#用户视图下</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Password</span><span class="cm-operator">:</span> <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-comment">#输入密码</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 503px;"></div><div class="CodeMirror-gutters" style="display: none; height: 503px;"></div></div></div></pre><h4 id='aaa模式'><span>aaa模式</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span><span class="cm-identifier">user-interface</span> <span class="cm-identifier">vty</span> <span class="cm-number">0</span> <span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#进入vty接口视图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">au</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">aaa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">aaa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">daxian</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-number">666</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">levle</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">display</span> <span class="cm-identifier">this</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">daxian</span> <span class="cm-identifier">service-type</span> <span class="cm-identifier">telnet</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; <span class="cm-comment">#选择服务</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">cuozao</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-number">888</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-number">15</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-aaa</span><span class="cm-punctuation">]</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">daxian</span> <span class="cm-identifier">service-type</span> <span class="cm-identifier">terminal</span> <span class="cm-identifier">telnet</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-comment">#两个都开启</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#R2 #被登录方</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">Huawei</span><span class="cm-operator">&gt;</span> <span class="cm-identifier">sys</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span> <span class="cm-identifier">interface</span> <span class="cm-identifier">g</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span> <span class="cm-identifier">interface</span> <span class="cm-identifier">GigabitEtherent</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">#进入端口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-number">10.1.1.2</span> <span class="cm-number">24</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-comment">#ip地址不能冲突</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span> <span class="cm-identifier">display</span> <span class="cm-identifier">this</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span> <span class="cm-identifier">q</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-comment">#退出当前视图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei</span><span class="cm-punctuation">]</span> <span class="cm-identifier">user-interface</span> &nbsp;<span class="cm-identifier">vty</span> <span class="cm-number">0</span> <span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#支持5个人同时登录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">au</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">password</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">protocol</span> <span class="cm-builtin">?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">protocol</span> <span class="cm-identifier">inbound</span> <span class="cm-identifier">telnet</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#远程登录协议</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">user</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-builtin">?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">user</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-number">15</span><span class="cm-error">（默认为０）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">Huawei-ui-vty0-4</span><span class="cm-punctuation">]</span> <span class="cm-identifier">telnet</span> <span class="cm-identifier">server</span> <span class="cm-identifier">enable</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-comment">#默认开启</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 572px;"></div><div class="CodeMirror-gutters" style="display: none; height: 572px;"></div></div></div></pre><hr /><h2 id='网络层'><span>网络层</span></h2><h3 id='进制转换'><span>进制转换</span></h3><p><span>1字节=8比特</span></p><figure><table><thead><tr><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th><th style='text-align:center;' ><span>0</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>27</span></td><td style='text-align:center;' ><span>26</span></td><td style='text-align:center;' ><span>25</span></td><td style='text-align:center;' ><span>24</span></td><td style='text-align:center;' ><span>23</span></td><td style='text-align:center;' ><span>22</span></td><td style='text-align:center;' ><span>21</span></td><td style='text-align:center;' ><span>20</span></td></tr><tr><td style='text-align:center;' ><span>128</span></td><td style='text-align:center;' ><span>64</span></td><td style='text-align:center;' ><span>32</span></td><td style='text-align:center;' ><span>16</span></td><td style='text-align:center;' ><span>8</span></td><td style='text-align:center;' ><span>4</span></td><td style='text-align:center;' ><span>2</span></td><td style='text-align:center;' ><span>1</span></td></tr></tbody></table></figure><blockquote><p><span>十进制转二进制</span>
<span>111 - 64 = 47 - 32 = 15 - 8 = 7 – 4 = 3 – 2  = 1 - 1  = 0</span>
<span>十进制转八进制/十六进制</span>
<span>先转二进制，再以3位/4位一组转换</span></p></blockquote><h3 id='ip地址'><span>IP地址</span></h3><blockquote><p><span>三层IP头部  网络层就是IP层  主要看的就是IP地址</span>
<span>IP地址 4字节=32比特  192.168.1.1（点分十进制）</span>
<span>IP地址分为两部分 </span><span style="color:#0080d6;"><span>网络部分</span></span><span>+</span><span style="color:#ffce49;"><span>主机部分</span></span><span> （通过网络掩码来区分）</span></p></blockquote><div style="font-family:JetBrains Mono">
<span style="color:#0080d6;">1100 0000.1010 1000.0000 0001.</span><span style="color:#ffce49;">0000 0001</span><br>
1111 1111.1111 1111.1111 1111.0000 0000<br>
192.169.1.0/24  24位网络位  8位主机位<br>
192.168.1.1 - 192.168.1.254<br>
192.168.1.0 – 192.168.1.255<br>
</div><p><mark><span>主机位全为0为网络地址（不可配置） 作用：代表该网段所有地址</span>
<span>主机位全为1为广播地址（不可配置） 作用：广播作用</span></mark></p><blockquote><p><span>IPV4地址32位</span>
<span>IPV6地址128位</span>
<span>通过地址转换来实现节约地址</span></p></blockquote><h3 id='查看ip地址'><span>查看ip地址</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">display</span> <span class="cm-identifier">cur</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#查看全部配置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">display</span> <span class="cm-identifier">this</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#接口视图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">display</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">interface</span> <span class="cm-identifier">brief</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#以表格形式查看IP  任何视图</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h3 id='ip地址分类'><span>IP地址分类</span></h3><div align="center">
<img style="width:500px" src="images/70068b7008f7f83e94d2cb09c48079bb0f317919cac48c65981326e4d6786ae4.png">
</div><figure><table><thead><tr><th><span>32比特          0.0.0.0 - 255.255.255.255</span></th><th>&nbsp;</th><th>&nbsp;</th></tr></thead><tbody><tr><td><span>超大型网络</span></td><td><span>A类</span></td><td><span>前一个比特为0</span></td></tr><tr><td><span>大型网络</span></td><td><span>B类</span></td><td><span>前两个比特为10</span></td></tr><tr><td><span>小型网络</span></td><td><span>C类</span></td><td><span>前三个比特为110</span></td></tr><tr><td><span>组播IP</span></td><td><span>D类</span></td><td><span>前四个比特为1110</span></td></tr><tr><td><span>保留IP</span></td><td><span>E类</span></td><td><span>前五个比特为1111</span></td></tr></tbody></table></figure><blockquote><p><span>A类网段：127-0+1=128</span>
<span>B类网段：191-128+1=64  </span><span>	</span><span>64×256=16384</span>
<span>C类网段：223-192+1=32  </span><span>	</span><span>32×256×256=2097152</span>
<span>这40多亿地址数默认分为128个A类网段，64×256个B类网段，32×256×256个C类网段</span></p></blockquote><h3 id='地址数'><span>地址数</span></h3><blockquote><p><span>一个网段所有的地址数目</span>
<span>192.168.1.0 ~ 192.168.1.255  (256个地址数）</span>
<span>172.16.0.0 /16 </span>&emsp;<span>256×256 = 28× 28 = 216</span>
<mark><span>地址数=2</span><sup><span>主机位</span></sup></mark></p></blockquote><h3 id='可用地址'><span>可用地址</span></h3><blockquote><p><span>可以配置的地址，也叫主机地址、合法地址</span>
<mark><span>可用地址数=地址数-2</span></mark><span>（减去一头一尾，网络地址和广播地址）</span></p><p><span>一个A类网段地址数有224个地址</span>
<span>一个B类网段地址数有216个地址</span>
<span>一个C类网段地址数有28个地址</span></p></blockquote><h3 id='特殊地址'><span>特殊地址</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0.0.0.0<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>代表所有网段的所有地址</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">255.255.255.255 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;  代表所有的广播地址</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">127.0.0.0-127.255.255.255 &nbsp; <span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; 环回测试地址</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h3 id='私有地址'><span>私有地址</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">A类地址内截取一段作为私有地址  <span class="cm-tab" role="presentation" cm-text="	">   </span>10.0.0.0~10.255.255.255 </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">B类地址内截取一段作为私有地址  <span class="cm-tab" role="presentation" cm-text="	">   </span>172.16.0.0~172.31.255.255</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">C类地址内截取一段作为私有地址  <span class="cm-tab" role="presentation" cm-text="	">   </span>192.168.0.0~192.168.255.255</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h3 id='有类编址的缺陷'><span>有类编址的缺陷</span></h3><ul><li><span>地址浪费</span></li><li><span>安全问题</span></li></ul><h3 id='子网划分'><span>子网划分</span></h3><blockquote><p><span>子网数（地址数）=2</span><sup><span>(掩码-默认掩码)</span></sup>
<span>可用地址数=2</span><sup><span>(掩码-默认掩码)</span></sup><span>-2</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.1.0 /24  地址数=2^(32-24)  主机位=32-24=8  /24（掩码位）</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1111 1111.1111 1111.1111 1111.0000 0000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.1.0 /25</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1111 1111.1111 1111.1111 1111.1000 0000</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.1.0/26 &nbsp; &nbsp; &nbsp;  192.168.1.0  ~192.168.1.63</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.64.0/26 &nbsp; &nbsp;  192.168.1.64 ~192.168.1.127</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.128.0/26 &nbsp;  192.168.1.128~192.168.1.191</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.192.0/26 &nbsp;  192.168.1.192~192.168.1.255</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 229px;"></div><div class="CodeMirror-gutters" style="display: none; height: 229px;"></div></div></div></pre><p><span>例：一家公司有四个部门 192.168.1.0 /24</span>
<span>部门A：32台主机  </span>&emsp;<span>部门B：60台主机  </span>&emsp;<span>部门C：2台主机  </span>&emsp;<span>部门D：10台主机</span></p><blockquote><p><span style="font-family:Cascadia Mono"><span>B部门：（先给主机多的部门分，减少浪费)</span><br><span>60主机 &lt; 2^n-2（n为主机位）&lt;26=64</span><span>			</span><span>主机位为6，掩码为26，每个子网地址数为64</span>
<span>192.168.1.0/26~192.168.1.63</span><br><span>A部门：</span>
<span>32主机 &lt; 2^n-2（n为主机位）&lt;26=64  </span>&emsp;&emsp;<span>主机位为6，掩码为26，每个子网地址数为64</span>
<span>192.168.1.64/26~192.168.1.127</span><br><span>D部门：</span>
<span>10主机 &lt; 2^n-2（n为主机位）&lt;24=16  </span>&emsp;&emsp;<span>主机位为4，掩码为28，每个子网地址数为16</span>
<span>192.168.1.128/28~192.168.1.143</span><br><span>C部门：</span>
<span>2主机 &lt; 2^n-2（n为主机位）&lt;22=16   </span>&ensp;&emsp;&emsp;<span>主机位为2，掩码为30，每个子网地址数为4</span>
<span>192.168.1.144/30~192.168.1.147</span></span></p></blockquote><p><span>例：192.168.10.0/24 </span>&emsp;&emsp;&emsp;&emsp;<span>192.168.10.200/27</span></p><blockquote><p><span style="font-family:Cascadia Mono"><span>子网数：2</span><sup><span>(子网位数)</span></sup><span> = 2</span><sup><span>(27-24)</span></sup><span> =2^3=8    </span>&emsp;&emsp;&emsp;<span>地址数：2</span><sup><span>(32-27)</span></sup><span>=32 </span><br><span>主机位：32-27=5  </span>&emsp;<span>1100 0000.1010 1000.0000 1010.1100 1000 </span><br><span>网络地址：</span>&emsp;&emsp;&emsp;&emsp;&emsp;<span>1100 0000.1010 1000.0000 1010.1100 0000  </span>&emsp;&emsp;<span>192.168.10.192</span><br><span>广播地址：</span>&emsp;&emsp;&emsp;&emsp;&emsp;<span>1100 0000.1010 1000.0000 1010.1101 1111  </span>&emsp;&emsp;<span>192.169.10.223</span>
<span>192.168.10.0~192.168.10.31 </span><br><span>32~63  </span>&emsp;<span>64~95  </span>&emsp;<span>96~127  </span>&emsp;<span>128~159  </span>&emsp;<span>160~191  192~223</span>
<span>192.168.10.224~192.168.10.255 </span><br><span>所在网段：192.168.10.192/27</span></span></p></blockquote><p><span>例：172.16.0.0/16  给300台主机划分子网</span></p><blockquote><p><span style="font-family:Cascadia Mono;"><span> 300&lt;2^9=512 </span><span>	</span><span>掩码位23 </span><span>	</span><span>32-9=23 </span><span>	</span><span> </span>&emsp;<span>9位主机位</span><br><span>172.16.0.0/23  </span>&emsp;&emsp;<span>172.16.0.0~172.16.1.255 </span><br><span>1010 1100.0001 0000.0000 0000 </span><br><span>1010 1100.0001 0001.1111 1111</span></span></p></blockquote><p><span>例：写出以下地址的网络地址和广播地址</span></p><blockquote><p><span style="font-family:Cascadia Mono"><span>172.16.100.100/22 </span><span>		</span><span>32-22=10</span><br><span>172.16.0110 0100.</span><span style="color:red"><span>0110 0100</span></span><br><span>172.16.0110 0100.</span><span style="color:red"><span>0000 0000</span></span><span>     </span>&emsp;<span>网络地址：172.16.100.0</span><br><span>172.16.0110 0111.</span><span style="color:red"><span>1111 1111</span></span><span>   </span>&emsp;<span>广播地址：172.16.103.255</span><br><br><span>10.11.12.13/17</span>&emsp;&emsp;<span>32-17=15 </span><br><span>10.11.0</span><span style="color:red"><span>000 1100.0000 1101</span></span><br><span>10.11.0</span><span style="color:red"><span>000 0000.0000 0000</span></span><span>   </span>&emsp;<span>网络地址：10.11.0.0</span><br><span>10.11.0</span><span style="color:red"><span>111 1111.1111 1111</span></span><span>   </span>&emsp;<span>广播地址：10.11.127.255</span></span></p></blockquote><p><span>例：公司网段172.16.0.0/16，规划5个部门，</span>
<span>分别部署70、80、30、10、4台主机，合理规划地址网段</span></p><blockquote><p><span style="font-family:Cascadia Mono"><span>80&lt;2^7=128 主机位：7  掩码：25  每个子网地址数128</span><br>
<span style="color:#3488f7"><span>172.16.0.0/25~172.16.0.127</span></span>
<br><span>70&lt;2^7=128 </span>&emsp;&ensp;<span>主机位：7  </span>&emsp;<span>掩码：25  </span>&emsp;&emsp;<span>每个子网地址数128</span><br>
<span style="color:#3488f7"><span>172.16.0.128/25~172.16.0.255</span></span>
<br><span>30&lt;2^5=32 </span>&emsp;&emsp;<span>主机位：5  </span>&emsp;<span>掩码：27  </span>&emsp;&emsp;<span>每个子网地址数32</span><br>
<span style="color:#3488f7"><span>172.16.1.0/27~172.16.1.31</span></span>
<br><span>10&lt;2^4=16 </span>&emsp;&emsp;<span>主机位：4  </span>&emsp;<span>掩码：16  </span>&emsp;&emsp;<span>每个子网地址数16 </span><br><span style="color:#3488f7"><span>172.16.1.32/16~172.16.1.47</span></span>
<br><span>4&lt;2^3=8 </span>&emsp;&emsp;&emsp;<span>主机位：3  </span>&emsp;<span>掩码：29  </span>&emsp;&emsp;<span>每个子网地址数8 </span><br><span style="color:#3488f7"><span>172.16.1.48/29~172.16.1.55</span></span></span></p></blockquote><h3 id='ip报文头部'><span>IP报文头部</span></h3><figure><table><thead><tr><th><span>数据报文头部（包头）</span></th><th><span>20字节~60字节之间</span></th></tr></thead><tbody><tr><td><span>Version版本</span></td><td><span>表明是ipv4还是ipv6</span></td></tr><tr><td><span>Header Length头部长度：</span></td><td><span>包头头部长度</span></td></tr><tr><td><span>DS Field服务类型</span></td><td><span>用于Qos（服务质量），数值越大优先级越高</span></td></tr><tr><td><span>Total Length总长度</span></td><td><span>头部+数据（数据段）长度</span></td></tr><tr><td><span>Identification标识</span></td><td><span>标识分片后为同一种数据</span></td></tr><tr><td><span>Flags标志</span></td><td><span>DF比特位（不可分片位）：为1，不可分片</span><br><span>MF比特位（更多分片位）：为1，还有分片</span></td></tr><tr><td><span>Fragment Offset片偏移</span></td><td><span>数据重组</span></td></tr><tr><td><span>TTL(Time to Live)生存时间</span></td><td><span>默认255，每经过一台三层设备自动-1</span><br><span>作用：防止环路</span></td></tr><tr><td><span>Protocol协议号</span></td><td><span>表明使用哪种协议 ICMP协议号为1</span></td></tr><tr><td><span>ICMP协议</span></td><td><span>ping</span></td></tr><tr><td><span>Header Checksum头部校验</span></td><td><span>校验头部</span></td></tr><tr><td><span>Source ip address（源地址）</span></td><td><span>源IP地址，32bit</span></td></tr><tr><td><span>Destination ip address（目标地址）</span></td><td><span>目的IP地址，32bit</span></td></tr></tbody></table></figure><hr /><h2 id='传输层'><span>传输层</span></h2><p><span>建立端到端的连接</span></p><blockquote><p><span>端口号：区分不同的协议服务</span>
<span>0~1023：公有端口号</span>
<span>telnet远程登录协议（TCP）端口号23</span>
<span>FTP文件传输协议（TCP）端口号20数据 21控制</span>
<span>DNS域名解析协议端口号53</span>
<span>http超文本连接协议 端口号80</span>
<span>https加密后的超文本连接端口号443</span>
<span>1024~65525：私有端口号</span></p></blockquote><h3 id='主要有两种协议'><span>主要有两种协议</span></h3><blockquote><p><span>TCP协议：协议号为6，主要是建立面向连接的服务，更可靠，支持重传，速度较慢，滑动窗口用于流量控制</span>
<span>如：文件传输</span>
<span>UDP协议：协议号17，主要建立面向无连接的服务，不可靠，不支持重传，速快，通过应用程序来流量控制</span>
<span>如：视频数据</span></p></blockquote><h3 id='tcp报文头部格式'><span>TCP报文头部格式</span></h3><div align="center">
<img style="width:400px" src="images/TCP.png">
</div><blockquote><p><span>序列号seq：表明该设备发送的第几个TCP报文</span>
<span>确认序列号ACK：用来对收到的TCP报文做出确认（在收到的TCP报文的序列号上+1）</span>
<span>头部长度：TCP头部的长度</span>
<span style="color:#40b881">
<span>六个控制位</span>
<span>U位，若置1，表明数据需要紧急处理，把数据提前放置缓存区前</span>
<span>A位，若置1，表明确认序列号有效</span>
<span>P位，若置1，表明数据加急处理，直接交由上层应用程序处理</span>
<span>R位，若置1，表明重新建立TCP连接</span>
<span>FIN位，若置1，表明断开连接</span>
<span>SYN位，若置1，表明建立连接</span>
</span>
<span>Window窗口：缓存区大小</span>
<span>校验和：用于校验TCP</span>
<span>紧急指针位有效：用于指出紧急处理数据大小</span></p></blockquote><h3 id='tcp三次握手'><span>TCP三次握手</span></h3><div align="center">
<img style="width:400px" src="images/TCP三次握手.png">
</div>  <h3 id='tcp四次挥手'><span>TCP四次挥手</span></h3><div align="center">
<img style="width:400px" src="images/TCP四次挥手.png">
</div><h3 id='udp头部格式'><span>UDP头部格式</span></h3><div align="center">
<img src="images/UDP.png">
</div>  <blockquote><p><span>源目端口</span>
<span>长度</span>
<span>校验</span></p></blockquote><hr /><h2 id='应用层'><span>应用层</span></h2><h3 id='dhcp协议'><span>DHCP协议</span></h3><blockquote><p><span>动态地址下发协议</span>
<span>客户端/服务器模式（C/S模式）</span>
<span>作用：动态给主机分配地址、网关等作用</span>
<span>DHCP工作在应用层，使用UDP作为其传输层协议</span></p></blockquote><h3 id='dhcp工作模式'><span>DHCP工作模式</span></h3><blockquote><p><span>基于接口 | 基于全局</span>
<span>全局地址池：从地址池里给客户端分配地址</span>
<span>地址内：地址、掩码、网关、租期</span></p></blockquote><h3 id='dhcp报文'><span>DHCP报文</span></h3><blockquote><p><span>discover发现报文：用来寻找DHCP服务器，广播发送</span>
<span>offer报文：由服务器发送，携带地址参数</span>
<span>request请求报文：</span></p><ul><li><span>用来请求服务器分配的地址是否可以使用</span></li><li><span>请求续租时会发送</span></li><li><span>客户端重启时发送</span></li></ul><p><span>ack报文：服务器同意使用</span>
<span>nak报文：服务器拒绝使用</span>
<span>release报文：离开报文，用来释放地址（客户端发送）</span></p></blockquote><h3 id='dhcp工作过程'><span>DHCP工作过程</span></h3><blockquote><ol start='' ><li><span>发现阶段/寻找阶段</span>
<span>通过dhcp-discovery报文广播寻找DHCP服务器</span></li><li><span>分配阶段</span>
<span>由服务器单播回应一个dhcp-offer报文（携带地址信息）</span></li><li><span>请求阶段</span>
<span>由客户端发送dhcp-request请求报文，向服务器请求该地址能否使用</span></li><li><span>确认阶段</span>
<span>服务器回应客户端发送的请求报文，同意则ack，拒绝则回应nak</span>
<span>注意：会发送三次ARP用来检测地址冲突（都是由客户端发送的）</span></li></ol></blockquote><h3 id='地址池好处'><span>地址池好处</span></h3><blockquote><ol start='' ><li><span>可回收，通过设置租期来实现回收（租期默认1天）</span></li><li><span>提高地址的使用效率</span></li><li><span>地址网段、网关、租期、DNS地址、</span></li></ol></blockquote><h3 id='dhcp租期问题'><span>DHCP租期问题</span></h3><blockquote><p><strong><span>默认1天</span></strong></p><ul><li><span>当主机（客户端）获取到地址时，会有个租期时间，当时间使用了50%租期时间时</span>
<span>主机（客户端）会主动单播发送request报文向服务器请求续租</span>
<span>若服务器同意续租，则回应一个ACK报文，续租成功</span>
<span>拒绝续租，则回应一个NAK报文，续租失败，继续使用剩余时间</span>
<span>无响应，续租失败，继续使用剩余时间</span></li><li><span>当主机（客户端）继续使用地址到87.5%时，进行重绑定</span>
<span>主机（客户端）会主动广播发送request报文去向服务器请求续租</span>
<span>若服务器同意续租，则回应一个ACK报文，续租成功</span>
<span>拒绝续租，则回应一个NAK报文，续租失败，继续使用剩余时间</span>
<span>无响应，续租失败，继续使用剩余时间</span></li><li><span>租期使用完毕，主机（客户端）发送release报文释放地址</span></li></ul></blockquote><h3 id='地址下发实验'><span>地址下发实验</span></h3><h4 id='dhcp实验步骤'><span>DHCP实验步骤</span></h4><p><span>1.开启DHCP服务</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-identifier">enable</span> &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#系统视图下路由器开启DHCP服务</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>2.若是全局模式，则创建全局地址池</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-error">地址池名称</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建地址池</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-A</span><span class="cm-punctuation">]</span><span class="cm-identifier">network</span> <span class="cm-error">网段</span> <span class="cm-identifier">mask</span> <span class="cm-error">掩码</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置地址池范围</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-A</span><span class="cm-punctuation">]</span><span class="cm-identifier">gate-list</span> <span class="cm-error">网关地址</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置网关地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-A</span><span class="cm-punctuation">]</span><span class="cm-identifier">lease</span> <span class="cm-identifier">day</span> <span class="cm-identifier">xx</span> <span class="cm-identifier">hour</span> <span class="cm-identifier">xx</span> <span class="cm-identifier">minute</span> <span class="cm-identifier">xx</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置租期时间，默认1天</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-A</span><span class="cm-punctuation">]</span><span class="cm-identifier">excluded-ip-address</span> <span class="cm-error">起始地址</span> <span class="cm-error">结束地址</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置保留地址（不下发）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-A</span><span class="cm-punctuation">]</span><span class="cm-identifier">dns-list</span> <span class="cm-identifier">DNS</span><span class="cm-error">服务器地址</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#域名解析服务器地址</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 275px;"></div><div class="CodeMirror-gutters" style="display: none; height: 275px;"></div></div></div></pre><p><span>3.在接口上选择全局模式</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-builtin">select</span> <span class="cm-identifier">global</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#选择模式：全局/接口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">注意：根据接口所在网段选择地址池</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h4 id='全局模式'><span>全局模式</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-identifier">enable</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#在设备上开启DHCP服务</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-identifier">gg</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">#创建全局地址池,系统视图下进入地址池，999为地址池名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-GG</span><span class="cm-punctuation">]</span><span class="cm-identifier">network</span> <span class="cm-number">192.168.1.0</span> <span class="cm-identifier">mask</span> <span class="cm-number">24</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; <span class="cm-comment">#设置地址池网段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-GG</span><span class="cm-punctuation">]</span><span class="cm-identifier">gateway-list</span> <span class="cm-number">192.168.1.1</span> &nbsp; <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">#设置网关地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#在接口下进行调用地址池</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-number">192.168.1.1</span> <span class="cm-number">24</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-builtin">select</span> <span class="cm-identifier">global</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-comment">#选择全局模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PC</span><span class="cm-operator">&gt;</span><span class="cm-identifier">ipconfig</span> &nbsp; <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#在客户端上查看获取的地址(从大到小分配)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">R1</span><span class="cm-operator">&gt;</span><span class="cm-identifier">display</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-identifier">name</span> <span class="cm-identifier">GG</span> <span class="cm-identifier">all</span> &nbsp; <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#查看全局地址池使用情况</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">R1</span><span class="cm-operator">&gt;</span><span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-identifier">gg</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-GG</span><span class="cm-punctuation">]</span><span class="cm-identifier">lease</span> <span class="cm-identifier">day</span> <span class="cm-number">2</span> &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; <span class="cm-comment">#设置租期，默认1天</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-GG</span><span class="cm-punctuation">]</span><span class="cm-identifier">dns-list</span> <span class="cm-number">114.114.114.114</span> <span class="cm-number">8.8.8.8</span> <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; <span class="cm-comment">#设置DNS服务器（域名-&gt;IP）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-GG</span><span class="cm-punctuation">]</span><span class="cm-identifier">excluded-ip-address</span> <span class="cm-number">200.1.1.97</span> <span class="cm-number">200.1.1.100</span> &nbsp;<span class="cm-comment">#保留地址，禁止下发(始发地址 结束地址）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool-GG</span><span class="cm-punctuation">]</span><span class="cm-identifier">static-bind</span> <span class="cm-identifier">ip-address</span> <span class="cm-number">200.1.1.101</span> <span class="cm-identifier">mac-address</span> <span class="cm-number">5489</span><span class="cm-operator">-</span><span class="cm-number">9833</span><span class="cm-operator">-</span><span class="cm-number">5</span><span class="cm-identifier">A4F</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">R1</span><span class="cm-operator">&gt;</span><span class="cm-identifier">reset</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-identifier">name</span> <span class="cm-identifier">GG</span> &nbsp;<span class="cm-identifier">used</span> <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp; <span class="cm-comment">#清除地址池</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PC</span><span class="cm-operator">&gt;</span><span class="cm-identifier">ipconfig</span> &nbsp;<span class="cm-operator">/</span><span class="cm-identifier">release</span> <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-comment">#在客户端可实现主动释放IP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">路由器客户端模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-identifier">enable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-identifier">dhcp-alloc</span> <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-comment">#接口视图下，开启路由器客户端接口获取动态地址</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 503px;"></div><div class="CodeMirror-gutters" style="display: none; height: 503px;"></div></div></div></pre><h4 id='接口模式'><span>接口模式</span></h4><p><span>网段和网关无法改变</span>
<span>先配置地址池在开启DHCP</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-number">192.168.1.1</span> <span class="cm-number">24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-identifier">server</span> <span class="cm-identifier">lease</span> <span class="cm-identifier">day</span> <span class="cm-number">2</span> &nbsp; &nbsp; &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#租期</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-identifier">server</span> <span class="cm-identifier">excluded-ip-address</span> <span class="cm-number">192.168.1.253</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">dhcp</span> <span class="cm-builtin">select</span> <span class="cm-identifier">interface</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">display</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-identifier">interface</span> <span class="cm-identifier">GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span> <span class="cm-identifier">all</span>  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp;<span class="cm-comment">#查看接口地址池</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 137px;"></div><div class="CodeMirror-gutters" style="display: none; height: 137px;"></div></div></div></pre><h3 id='ftp文件传输协议'><span>FTP文件传输协议</span></h3><blockquote><p><span>应用层协议，使用TCP作为其传输层协议，端口号使用20用于数据，21用于控制</span>
<span>实验步骤：</span>
<span>前提：路由可达</span></p><ol start='' ><li><span>FTP服务器首先进行启动（选择FTP服务器文件）</span></li><li><span>在FTP客户端进行登录，之后就可以实现文件的上传与下载</span></li></ol></blockquote><h3 id='路由器作为服务器'><span>路由器作为服务器</span></h3><p><span>1.开启设备FTP功能</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ftp</span> <span class="cm-identifier">server</span> <span class="cm-identifier">enable</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>2.创建aaa账户实现FTP文件传输</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">aaa</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span><span class="cm-identifier">local-user</span> <span class="cm-number">123</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-number">999</span> <span class="cm-identifier">privilege</span> <span class="cm-identifier">level</span> <span class="cm-number">15</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span><span class="cm-identifier">local-user</span> <span class="cm-number">123</span> <span class="cm-identifier">service-type</span> <span class="cm-identifier">ftp</span> <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#设置服务类型为FTP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span><span class="cm-identifier">local-user</span> <span class="cm-number">123</span> <span class="cm-identifier">ftp-directory</span> <span class="cm-identifier">flash</span><span class="cm-operator">:</span> <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; <span class="cm-comment">#设置默认目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">之后在客户端验证</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ftp</span> <span class="cm-error">服务器地址</span> &nbsp; &nbsp; &nbsp;<span class="cm-comment">#实现登录服务器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">get</span> <span class="cm-error">文件名</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#下载文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">put</span> <span class="cm-error">文件名</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#上传文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">dir</span> <span class="cm-error">查看该设备文件</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 229px;"></div><div class="CodeMirror-gutters" style="display: none; height: 229px;"></div></div></div></pre><hr /><h2 id='arp协议'><span>ARP协议</span></h2><blockquote><p><span>地址解析协议 Type：ARP（0x0806）</span>
<span>作用：解析未知的目的MAC地址</span>
<mark><span>广播请求，单播回应</span></mark>
<span>工作原理：通过已知的目的IP地址去解析未知的目的MAC地址</span>
<span>IPV4的一个弊端：IPV4过于依赖ARP协议</span></p></blockquote><h3 id='arp映射表'><span>ARP映射表</span></h3><p><span>默认老化时间1200s（20分钟）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PC</span><span class="cm-operator">&gt;</span><span class="cm-identifier">arp</span> <span class="cm-operator">-</span><span class="cm-identifier">a</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#查看ARP缓存表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#保存的是IP地址与MAC地址的映射关系</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">display</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">routing-table</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#查看路由表</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 114px;"></div><div class="CodeMirror-gutters" style="display: none; height: 114px;"></div></div></div></pre><h3 id='arp格式'><span>ARP格式</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Address</span> <span class="cm-identifier">Resolution</span> <span class="cm-identifier">Protocol</span> <span class="cm-punctuation">(</span><span class="cm-identifier">request</span><span class="cm-punctuation">)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Hardware</span> <span class="cm-builtin">type</span><span class="cm-operator">:</span> <span class="cm-identifier">Ethernet</span> <span class="cm-punctuation">(</span><span class="cm-number">1</span><span class="cm-punctuation">)</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-error">物理硬件类型（</span><span class="cm-identifier">MAC</span><span class="cm-error">）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Protocol</span> <span class="cm-builtin">type</span><span class="cm-operator">:</span> <span class="cm-identifier">IP</span> <span class="cm-punctuation">(</span><span class="cm-number">0x0800</span><span class="cm-punctuation">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-error">网络协议类型（</span><span class="cm-identifier">IP</span><span class="cm-error">）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Hardware</span> <span class="cm-identifier">size</span><span class="cm-operator">:</span> <span class="cm-number">6</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-identifier">MAC</span><span class="cm-error">字节长度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Protocol</span> <span class="cm-identifier">size</span><span class="cm-operator">:</span> <span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">IP</span><span class="cm-error">字节长度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Opcode</span><span class="cm-operator">:</span> <span class="cm-identifier">request</span> <span class="cm-punctuation">(</span><span class="cm-number">1</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Sender</span> <span class="cm-identifier">MAC</span> <span class="cm-identifier">address</span><span class="cm-operator">:</span> <span class="cm-identifier">Huawei_04</span><span class="cm-operator">:</span><span class="cm-number">00</span><span class="cm-operator">:</span><span class="cm-number">01</span> <span class="cm-punctuation">(</span><span class="cm-number">54</span><span class="cm-operator">:</span><span class="cm-number">89</span><span class="cm-operator">:</span><span class="cm-number">98</span><span class="cm-operator">:</span><span class="cm-number">04</span><span class="cm-operator">:</span><span class="cm-number">00</span><span class="cm-operator">:</span><span class="cm-number">01</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Sender</span> <span class="cm-identifier">IP</span> <span class="cm-identifier">address</span><span class="cm-operator">:</span> <span class="cm-number">10.1.1.1</span> <span class="cm-punctuation">(</span><span class="cm-number">10.1.1.1</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Target</span> <span class="cm-identifier">MAC</span> <span class="cm-identifier">address</span><span class="cm-operator">:</span> <span class="cm-identifier">Broadcast</span> <span class="cm-punctuation">(</span><span class="cm-identifier">ff</span><span class="cm-operator">:</span><span class="cm-identifier">ff</span><span class="cm-operator">:</span><span class="cm-identifier">ff</span><span class="cm-operator">:</span><span class="cm-identifier">ff</span><span class="cm-operator">:</span><span class="cm-identifier">ff</span><span class="cm-operator">:</span><span class="cm-identifier">ff</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Target</span> <span class="cm-identifier">IP</span> <span class="cm-identifier">address</span><span class="cm-operator">:</span> <span class="cm-number">10.1.1.2</span> <span class="cm-punctuation">(</span><span class="cm-number">10.1.1.2</span><span class="cm-punctuation">)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 229px;"></div><div class="CodeMirror-gutters" style="display: none; height: 229px;"></div></div></div></pre><h3 id='arp工作过程'><span>ARP工作过程</span></h3><blockquote><ul><li><span>设备首先查看自身缓存的ARP缓存表</span>
<span>若在表中有对应的目的IP地址与MAC地址，则正常封装</span>
<span>若在表中没有，则</span><mark><span>广播发送ARP请求报文</span></mark></li><li><span>在这个广播域中所有设备都会接受该请求报文进行解封装（拆帧头帧尾）</span>
<span>若目的IP是自身则</span><mark><span>单播发送ARP回应报文</span></mark>
<span>若目的IP不是自身则丢弃</span>
<span>注意：其它设备收到ARP请求报文，都会记录报文源IP与源MAC映射关系</span></li><li><span>设备收到ARP回应后记录报文源IP与源MAC的映射关系</span>
<span>记录在ARP缓存表中，便于下次通信</span></li></ul></blockquote><h3 id='免费arp'><span>免费ARP</span></h3><blockquote><p><span>作用：检测IP地址是否冲突</span>
<span>工作原理：把目的IP地址与源IP地址相同</span>
<span>通过广播发送免费ARP报文（请求报文）</span></p></blockquote><h3 id='代理arp'><span>代理ARP</span></h3><blockquote><p><span>同一网段、不同物理网络上的计算机之间，可以通过ARP代理实现相互通信</span>
<span>使用场景一般在于主机没有缺省网关时，会在直连路由器接口开启ARP代理功能</span>
<span>缘由：因ARP请求报文无法跨路由器,由路由器作为代理人进行中转发送</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">arp-proxy enable &nbsp;  #开启ARP代理</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><hr /><h2 id='路由'><span>路由</span></h2><blockquote><p><span>负责指导数据转发</span>
<span>三层设备看路由（三层设备都把帧头帧尾去掉，查看IP）</span>
<span>配置接口IP时，可以从一个接口视图下直接跳转另一个接口视图，只是无法补全</span></p></blockquote><h3 id='路由表六要素'><span>路由表六要素</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-identifier">R1</span><span class="cm-operator">&gt;</span><span class="cm-identifier">display</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">routing-table</span> &nbsp;<span class="cm-comment">#查看路由表</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><figure><table><thead><tr><th><span>路由表六要素</span></th><th>&nbsp;</th></tr></thead><tbody><tr><td><span>Destinnation/Mask</span></td><td><span>目的地，网络地址形式存在</span></td></tr><tr><td><span>Proto</span></td><td><span>协议：通过不同方式学习到的路由，协议不同</span><br><span>直连学习路由Direct（路由优先级默认为0）</span><br><span>静态路由协议Static（路由优先级默认为60）</span><br><span>动态路由协议：如OSPF:内部10外部150、BGP:255、ISIS:15、RIP:100</span></td></tr><tr><td><span>Pre</span></td><td><span>路由优先级，就是不同路由协议的比较，数值越小越优先</span><br><span>（取值范围0~255，0无法主动设置）</span></td></tr><tr><td><span>Cost</span></td><td><span>开销（度量值）相同协议的比较，数值越小越优先</span></td></tr><tr><td><span>NextHop</span></td><td><span>下一跳：去往目的地的下一步的接口IP地址</span></td></tr><tr><td><span>Interface</span></td><td><span>出接口：去往目的地离开本设备的出接口</span></td></tr></tbody></table></figure><h3 id='静态路由配置'><span>静态路由配置</span></h3><p><span>静态路由优势：稳定，没有报文交互，减轻资源</span></p><blockquote><p><mark><span>ip route-static + 目标网段 + 掩码 + 出接口 + 下一跳地址</span></mark></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">route-static</span> <span class="cm-number">192.168.2.0</span> <span class="cm-number">24</span> <span class="cm-identifier">GibabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span> <span class="cm-number">10.1.1.2</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><blockquote><p><mark><span>ip route-static + 目标网段 + 掩码 + 下一跳地址</span></mark></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">route-static</span> <span class="cm-number">192.168.1.0</span> <span class="cm-number">24</span> <span class="cm-number">10.1.1.1</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><blockquote><p><span>注意： 下一跳地址不一定是直连设备的接口地址</span>
<span>目标网段可以是网段内任意地址</span>
<span>关闭接口：shutdown   打开：undo shutdown</span>
<span>ICMP协议 协议号1</span></p></blockquote><h3 id='两个诊断工具'><span>两个诊断工具</span></h3><blockquote><p><strong><span>ping</span></strong>
<span>检测设备连通性，只能检测单项连通性（去往目的地的连通性）</span>
<span>无法检测目的地到自身的连通性</span>
<strong><span>tracert</span></strong>
<span>路由追踪，记录沿途所经过的IP地址（记录流量入方向的接口地址）</span></p></blockquote><h3 id='判断一个接口地址是否能够ping通'><span>判断一个接口地址是否能够ping通</span></h3><blockquote><p><span>查看来回的路由</span>
<span>查看接口地址是否与接口编号对应</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ping -a 源IP + 目的IP</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ping -a 192.168.1.2  10.1.1.1 </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='负载分担等价路由）'><span>负载分担（等价路由）</span></h3><p><span>使用前提：相同协议，相同优先级，相同开销</span></p><blockquote><p><span>共同承载（最直接的体现在路由表中有多个下一跳）</span></p></blockquote><h3 id='两种模式通过哈希算法计算）'><span>两种模式（通过哈希算法计算）</span></h3><blockquote><p><span>逐包：数据每次发送数据都与上一次发送下一跳不同</span>
<span>逐流：数据每次发送数据都与上一次发送下一跳相同</span></p></blockquote><h3 id='浮动路由路由备份'><span>浮动路由(路由备份)</span></h3><blockquote><p><span>两条或多条链路组成浮动路由， 默认选取链路质量优的（带宽大的）作为主路径，当主路径出现故障时，由带宽较小的备份路径顶替主路径。</span>
<span>通过修改静态路由的路由优先级，来实现路由备份作用</span>
<span>作为主路径的备用路径（这条路由在路由表看不到）</span></p></blockquote><h3 id='修改优先级'><span>修改优先级</span></h3><blockquote><p><mark><span>ip + route-static + 目的地 + 下一跳 + preference + 优先级</span></mark>
<span>ip  route-static  192.168.1.0  24  192.168.5.1  preference  59</span>
<span>注意：</span>
<span>优先级取值范围1字节  0~255</span>
<span>但配置时范围为1~255 优先级0无法配置</span></p></blockquote><h3 id='最长掩码匹配规则'><span>最长掩码匹配规则</span></h3><blockquote><p><span>IP网络中当路由表中有多条条目可以匹配目的ip时，一般就采用掩码最长（最精确）的一条作为匹配项并确定下一跳。（也叫最长前缀匹配，是路由器在查找路由表进行选路的算法）</span></p></blockquote><h3 id='负载均衡'><span>负载均衡</span></h3><blockquote><p><strong><span>优先级比较</span></strong>
<span>对于相同路由而言</span></p><ul><li><span>不同路由协议通过路由优先级一定可以比较出优劣</span>
<span>不同协议之间一定无法实现负载分担</span></li><li><span>不同协议优先级相同，则比较默认优先级（内部）</span></li><li><span>相同协议路由优先级相同，才能去比较cost开销</span></li></ul></blockquote><h3 id='路由汇总'><span>路由汇总</span></h3><blockquote><p><span>把多条路由条目进行汇总成一条路由</span>
<span>汇总前的路由叫明细路由</span>
<span>汇总后的路由叫汇总路由（聚合路由）</span>
<span>注意：最好是精确汇总</span>
<span>loopback0 192.168.1.0 32 </span>&emsp;&emsp;<span>192.168.1.0000 0000</span>
<span>loopback1 192.168.1.1 32 </span>&emsp;&emsp;<span>192.168.1.0000 0001</span>
<span>loopback2 192.168.1.2 32 </span>&emsp;&emsp;<span>192.168.1.0000 0010</span>
<span>loopback3 192.168.1.3 32 </span>&emsp;&emsp;<span>192.168.1.0000 0011</span>
<span>loopback4 192.168.1.4 32 </span>&emsp;&emsp;<span>192.168.1.0000 0100</span>
<span>loopback5 192.168.1.5 32 </span>&emsp;&emsp;<span>192.168.1.0000 0101</span>
<span>ip  route-static  192.168.1.0  29  10.1.1.2</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">loopback环回测试接口</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1]interface Loopback1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-LoopBack1]ip address 192.168.1.1 32</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h3 id='缺省路由默认路由）'><span>缺省路由（默认路由）</span></h3><p><span>使用场景：内网访问外网时必须使用缺省路由</span>
<span>注意：在两台相邻设备间尽量避免使用相反方向（容易造成环路）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ip route-static 0.0.0.0 0 192.168.2.2</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#ip route-static 缺省路由 掩码 下一跳</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='黑洞路由'><span>黑洞路由</span></h3><p><span>出接口就是黑洞null，只进不出</span>
<span>可以一定情况下解决环路，但解决环路也会导致无法连通</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R4]ip  route-static  200.1.1.0 24  NULL0</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3 id='静态路由实验配置'><span>静态路由实验配置</span></h3><blockquote><p><span>@地址规划要完成，注意标注在拓扑图中，方便查看</span></p></blockquote><p><span>① 地址不能冲突且要合法（不能是网络地址与广播地址）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1]interface GigabitEthernet 0/0/0 &nbsp; &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#从系统视图下进入对应接口视图</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-GigabitEthernet0/0/0]ip address 192.168.1.1 24</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#在接口视图下配置接口地址</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>② 地址与设备接口编号需要对应上</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1]display ip interface  brief &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#系统视图下查看设备接口地址与对应编号</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>③ PC主机的地址与设备地址不能冲突</span>
<span>PC网关地址注意是离开该网网段的接口地址，不能是网络地址</span>
<span>注意:</span>
<span>有些路由器的接口不是GigabitEthernet千兆接口</span>
<span>有些路由器的接口Ethernet为百兆接口可能不能配置地址</span>
<span>尽量选择路由器型号为AR2220路由器，或者无法使用则选择Router路由器，</span>
<span>连接设备时尽量选择线缆（⚡）的第二个实线图标（双绞线）手工选择接口</span>
<span>(尽量使用千兆接口GigabitEthernet)</span></p><blockquote><p><span>@地址完成规划</span></p></blockquote><p><span>① 查看路由表</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;display ip routing-table</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#除了直连路由，若查不到其他网段的路由条目，则就写静态路由</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>② 配置静态路由（一定是在系统视图下配置的静态路由）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1]ip route-static 192.168.1.0 24 10.1.1.1</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">例：ip route-static 目的网段 &nbsp; 下一跳地址</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>③ 查看自己配置的静态路由</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1]display  this &nbsp; &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#系统视图下查看，或者直接查看设备的路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>设备缺哪条路由网段条目，就手工写上静态告知数据包往哪发送（路由有去有回）</span>
<span>若配置了静态路由，但在路由表中查不到，这时候注意写的下一跳地址有没有配置错误</span></p><blockquote><p><span>@完成全网互通后再逐步实现浮动路由通过修改路由优先级</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1]ip route-static 192.168.1.0 255.255.255.0 10.1.1.1 preference  xx &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#通过修改路由优先级，静态默认60</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='设备配置清除命令'><span>设备配置清除命令</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;reset saved-configuration &nbsp; y #清除配置文件</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;reboot &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  n-&gt;y #重启设备</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='路由优选'><span>路由优选</span></h3><blockquote><ol start='' ><li><span>优先路由优先级，数值越小越优先</span></li><li><span>不同协议优先级相同，比较默认优先级</span>
<span>通过优先级一定可以比较不同协议优劣</span></li></ol></blockquote><hr /><h2 id='路由算法'><span>路由算法</span></h2><h3 id='静态路由'><span>静态路由</span></h3><blockquote><p><span>只适合小型网络，稳定，无需交互报文</span></p><ul><li><span>随着设备增加，配置量急剧加大</span></li><li><span>无法动态感知拓补图变化，需要管理员手工干预</span></li></ul></blockquote><h3 id='动态路由'><span>动态路由</span></h3><blockquote><p><span>动态路由自动学习到，适合大型网络，需要交互报文</span></p><ul><li><span>能动态感知拓补图变化，自动变更路径</span></li></ul></blockquote><h3 id='按工作区域划分as自治系统）'><span>按工作区域划分（AS自治系统）</span></h3><blockquote><p><span>AS 自治系统：在统一管理下使用相同选路策略协议组织</span></p><ul><li><span>工作在同一个AS内（IGP内部网关路由协议）</span>
<span>RIP、OSPF、IS-IS（中间系统到中间系统）</span></li><li><span>工作在AS自治系统之间（BGP外部网关路由协议）</span>
<span>BGP</span></li></ul></blockquote><h3 id='按工作算法划分'><span>按工作算法划分</span></h3><blockquote><p><span>距离矢量路由协议算法：只传递路由，传闻，</span><mark><span>直接传递结果</span></mark><span>，不可靠，易产生环路</span>
<span>如：RIP</span>
<span>链路状态路由协议算法：</span><mark><span>传递的是链路状态信息</span></mark><span>，传信，需要根据LSDB自行计算路由，</span>
<span>可靠，单区域天然无环</span>
<span>如：OSPF 、IS-IS</span>
<span>注释：链路状态信息（LS信息）：接口地址、掩码、接口开销、网络类型、所连邻居等</span>
<span>链路状态数据库（LSDB）:存放各设备的LSA信息</span></p></blockquote><h3 id='ospf协议'><span>OSPF协议</span></h3><blockquote><p><span>开放式最短路径优先</span>
<span>工作在网络层之上的路由协议  协议号89  封装在IP报文内</span></p></blockquote><h3 id='ospf工作原理'><span>OSPF工作原理</span></h3><p><span>链路状态路由协议算法工作过程</span></p><ol start='' ><li><span>首先发现、建立并维护邻居（hello报文周期发送）</span></li><li><span>交互LSA信息，同步LSDB数据库</span></li><li><span>根据LSDB计算路由（通过SPF最短路径树算法，以自己为根计算到达任意网段的最短路由）</span></li><li><span>通过SPF算法计算出协议路由表，再根据比较选最优的路由加入全局路由表</span></li></ol><h3 id='ospf单区域实验步骤'><span>OSPF单区域实验步骤</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ospf</span> <span class="cm-error">进程号</span> <span class="cm-identifier">router-id</span> <span class="cm-identifier">RID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#创建OSPF进程，设置router-id</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ospf-1</span><span class="cm-punctuation">]</span><span class="cm-identifier">area</span> <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">#进入进程视图，area0进入区域0视图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ospf-1-area-0</span><span class="cm-number">.0.0.0</span><span class="cm-punctuation">]</span><span class="cm-identifier">network</span> &nbsp;<span class="cm-number">30.1.1.0</span> &nbsp;<span class="cm-number">0.0.0.255</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">network</span> <span class="cm-error">网段</span> <span class="cm-error">反掩码</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">#宣告网段，使能接口加入OSPF</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='五种ospf报文'><span>五种OSPF报文</span></h3><blockquote><p><span>Hello报文：周期发送（10s），用来发现、建立并维护邻居关系</span>
<span>DD报文：描述本地LSDB摘要</span>
<span>LSR报文：向邻居请求所缺失的LSA详细信息（带的是所请求的LSA的摘要）</span>
<span>LSU报文：用来回应对方所请求的LSA详细信息</span>
<span>LSAck报文：用来对收到的LSA详细信息做出回应</span></p></blockquote><h3 id='三张表'><span>三张表</span></h3><p><span>OSPF邻居表：保存该设备的邻居关系与状态</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;display ospf peer brief  #查看OSPF邻居关系</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>OSPF LSDB表：保存该区域下的LSA所有信息，每个区域都有一张LSDB表，相同区域内的LSDB一定相同</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;display ospf lsdb</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>OSPF路由表：OSPF协议根据SPF树算法计算出的OSPF路由（协议路由表）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R1&gt;display ospf routing</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3 id='router-id'><span>Router ID</span></h3><p><span>在OSPF域（配置了OSPF协议的范围）中用来表明一个路由器身份</span>
<span>注意：RID不能冲突，不支持抢占</span>
<span>32比特形式表示</span></p><h3 id='router-id的获取方式'><span>Router ID的获取方式</span></h3><h4 id='手工获取'><span>手工获取</span></h4><p><span>1.直接在配置进入进程视图时手工设置RID</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R10]ospf  1  router-id 10.10.10.10 &nbsp; &nbsp; #协议RouterID</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>2.在系统视图下设置全局RID作为备份</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R10]router id 10.10.10.10 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  #全局RouterID</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>注意：协议RID高于全局RID</span></p><h4 id='自动获取'><span>自动获取</span></h4><p><span>华为默认使用全局RID作为OSPF协议RID</span>
<span>全局Router ID默认为配置的第一个地址</span>
<span>也就意味着如果没有手工获取</span>
<span>OSPF的RID默认为配置的第一个地址作为RID</span></p><blockquote><p><span>实际理论自动获取（思科）</span>
<span>1.若有loopback接口，则用最大的loopback接口地址</span>
<span>2.若没有loopback接口，则用最大物理接口地址</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&lt;R11&gt;reset ospf prosses &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #重启OSPF进程</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3 id='cost开销值度量值）'><span>cost开销值（度量值）</span></h3><blockquote><p><span>衡量去往某条路由的成本，路由方向的入接口的接口开销之和</span>
<span>注意：</span>
<span>路由方向：路由传递过来的方向（其实是链路状态信息传递过来的方向）</span>
<span>数据方向（流量方向）：数据报文实际流向</span>
<span>通过修改开销值来干预设备选路</span>
<span>接口开销值：参考带宽/实际带宽</span>
<span>(参考带宽默认为100Mbps/s，只取整数，不足1以1为准)</span>
<span>接口开销是一个接口属性</span>
<span>路由开销是一条路径上接口开销的累计和</span></p></blockquote><h3 id='修改开销的方法'><span>修改开销的方法</span></h3><h4 id='直接修改接口开销'><span>直接修改接口开销</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R3</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R3-GigabitEhthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ospf</span> <span class="cm-identifier">cost</span> &nbsp;<span class="cm-error">开销值</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#接口视图直接修改开销值</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h4 id='修改参考带宽'><span>修改参考带宽</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ospf-1</span><span class="cm-punctuation">]</span><span class="cm-identifier">bandwidh-reference</span> <span class="cm-error">参考值</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ospf进程视图下修改参考带宽</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">若同时修改了，则接口优于全局的</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h3 id='八种状态机制lsdb同步过程）'><span>八种状态机制（LSDB同步过程）</span></h3><p><strong><span>分为两种关系：</span></strong></p><h4 id='邻居状态'><span>邻居状态</span></h4><blockquote><p><strong><span>down</span></strong><span>：初始状态，接口刚加入OSPF的状态（组播发送Hello报文）</span>
<strong><span>attempt</span></strong><span>：发送了Hello报文，但没收到Hello报文（只有特殊网络类型（NBMA）中才会出现）</span>
<strong><span>init状态</span></strong><span>：发送了Hello报文，也收到了Hello报文，但在收到的Hello报文中没有看到自己的名字（单向邻居建立起来了）</span>
<strong><span>2-way状态</span></strong><span>：发送了Hello报文，且在收到的Hello报文邻居列表中有自己</span>
<span> 双向邻居建立起来，邻居的最高状态（完成DR/BDR选举）</span></p></blockquote><h4 id='邻接状态'><span>邻接状态</span></h4><blockquote><p><strong><span>EX-start</span></strong><span>：交互第一个DD报文（空的，不携带LS信息），协商主从（通过RID比较，越大越优）协商主从的目的：确保报文的有序交互，提高可靠性</span>
<strong><span>EX-change</span></strong><span>：通过DD报文（携带LSA摘要信息）描述本地LSDB数据库，若两边LSDB本就相同，则就直接达到full状态</span>
<strong><span>Loading</span></strong><span>：通过LSR报文、LSU报文交互详细的LSA信息</span>
<strong><span>FULL</span></strong><span>：（发送Ack报文，确认收到LSA信息）LSDB数据库同步完成</span>
<span>邻接关系最高状态</span></p></blockquote><h3 id='drbdr'><span>DR/BDR</span></h3><p><span>DR是指定路由器、BDR备用指定路由器，它们都是接口地址表示</span></p><blockquote><p><span>作用</span></p><ul><li><span>用来减少邻接的关系数量（DR-other之间2-way关系）</span></li><li><span>较少LSA信息交互，提高设备资源利用效率</span></li></ul></blockquote><h3 id='如何选举产生drbdr'><span>如何选举产生DR/BDR</span></h3><p><span>通过交互的hello报文来进行选举</span></p><blockquote><p><span>选举规则</span></p><ul><li><span>通过比较hello报文中的DR优先级，数值越大越优先，默认为1，范围0~255</span>
<mark><span>0不参与选举</span></mark></li><li><span>优先级相同则比较RID，数值越大越优先</span>
<span>注意：DR／BDR都不支持强占，一般情况下谁先启动谁就是DR</span>
<span>若是通过规则进行比较选择DR／BDR：</span>
<span>先通过选举规则选出最优的BDR，然后把BDR升级为DR，再继续选举BDR</span></li><li><span>有DR的场景不一定有BDR</span></li><li><span>有BDR的场景一定会有DR</span></li></ul></blockquote><p><span>每个广播域都会进行选举（前提是没有修改网络类型）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-GigabitEhternet0/0/0]ospf dr-priority 优先级</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#接口视图下设置DR优先级，默认为１，范围0~255，0不参与选举</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='路由引入'><span>路由引入</span></h3><blockquote><p><span>在一台路由器上某种协议引入到另一种协议</span>
<span>现阶段都是把其它协议引入到OSPF，引入的路由叫OSPF外部路由</span>
<span>O_ASE ：OSPF外部路由  优先级150</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R5-ospf-1]import-route 协议名  #在ospf进程视图下执行引入动作</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>注意：引入路由时，缺省路由无法引入</span></p><h3 id='ospf自动下发默认）缺省路由'><span>OSPF自动下发（默认）缺省路由</span></h3><p><span>通过外部路由形式存在</span>
<mark><span>路由器不能给自己下发缺省路由，只能给下面的路由器下发</span></mark></p><ul><li><span>下发缺省路由告知OSPF域其它设备产生缺省路由</span>
<span>前提自己得有一条缺省路由，缺省路由消失，下发的路由也会消失</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R2-ospf-1]default-route-advertise #在OSPF进程视图下进行下发</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><ul><li><span>强制下发缺省路由，不管该设备是否存在缺省路由，都会下发缺省</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R2-ospf-1]default-route-advertise　allways  #强制下发</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3 id='ospf四种网络类型'><span>OSPF四种网络类型</span></h3><p><span>底层物理介质不同，默认网络就不同</span></p><p><span>死亡时间默认为间隔时间4倍，更改死亡时间不影响间隔时间</span></p><blockquote><p><strong><span>BMA（广播）broadcast</span></strong>
&emsp;<span>一个接口允许接入多台设备，支持广播和组播</span>
&emsp;<span>以太网线默认就是广播式网络</span>
&emsp;<mark><span>hello间隔时间默认10s</span></mark><span>，hello死亡时间40s</span>
<strong><span>NBMA</span></strong>
&emsp;<span>一个接口允许接入多台设备，不支持广播和组播</span>
&emsp;<span>FR帧中继默认就是NBMA网络（需手工指定邻居单播发送）</span>
&emsp;<mark><span>hello间隔时间30s</span></mark><span>，hello死亡时间120s</span>
<strong><span>以上才会选举DR/BDR</span></strong></p><p><strong><span>P2P</span></strong>
&emsp;<span>点到点，一个接口只允许接入一台设备</span>
&emsp;<span>底层协议默认是串口线ppp协议</span>
&emsp;<mark><span>hello间隔时间默认10s</span></mark><span>，hello死亡时间40s</span>
<strong><span>P2MP</span></strong>
&emsp;<span>点到多点，多个点到点绑一起</span>
&emsp;<mark><span>hello间隔时间30s</span></mark><span>，hello死亡时间120s</span>
&emsp;<span>没有哪个底层协议默认为P2MP，需要从其它网络类型手工修改</span>
<strong><span>以上两个不会选举DR/BDR</span></strong></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ospf timer hello xxx &nbsp;  #修改死亡时间</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">display interface &nbsp; &nbsp; &nbsp; #查看详细信息</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><hr /><h2 id='区域area'><span>区域area</span></h2><p><span>每个区域内所有设备都具有一张相同的LSDB表</span></p><h3 id='为什么需要划分区域'><span>为什么需要划分区域</span></h3><blockquote><ul><li><span>若单区域过大，会导致LSDB表规模过大，从而影响路由计算效率，收敛速度变慢</span></li><li><span>若单区域过大，某个设备或某条电路出现故障，影响范围更大</span></li></ul></blockquote><h3 id='区域分为两种'><span>区域分为两种</span></h3><blockquote><p><span>骨干区域：area 0</span>
<span>非骨干区域：area 非0</span></p></blockquote><h3 id='为什么划分骨干与非骨干ospf防环机制）'><span>为什么划分骨干与非骨干（OSPF防环机制）</span></h3><p><span>用于OSPF防环</span></p><blockquote><ul><li><span>非骨干之间通信必须要经过骨干区域</span></li><li><span>非骨干必须要连接骨干区域（骨干区域要连续）</span></li><li><span>(连续的)同区域间可以直接通信</span></li></ul><p><span>OSPF划分区域可以说是基于接口划分区域</span>
<span>想要把哪个接口划分在区域内，那就在哪个区域视图进行宣告该接口所在网段</span>
<span>若一条链路上两台设备各自宣告网段（必须得相同区域才能建立邻居关系）</span></p></blockquote><h3 id='路由器角色'><span>路由器角色</span></h3><p><span>正是因为多区域划分，导致基于区域有不同的路由器角色</span></p><blockquote><p><span>IR路由器（区域内路由器）：路由器所有接口都属于一个区域</span>
<span>BR路由器（骨干路由器）：至少有一个接口属于骨干区域</span>
<span>ABR路由器（区域间路由器）：路由器接口属于两个区域及以上，且必有一个接口属于骨干区域</span>
<span>ABR作用：交互传递区域间路由信息</span>
<span>ASBR路由器（自治系统边界路由器）：就是OSPF边界上的路由器，只要执行了引入动作的路由器就是ASBR路由器</span>
<span>ASBR作用：交互外部路由信息</span><br>
<span>组播地址：</span>
<span>22.0.0.5所有OSPF路由器都能接收</span>
<span>224.0.0.6只有DR/BDR路由器能接收</span></p></blockquote><h2 id='交换模块'><span>交换模块</span></h2><h3 id='交换机处理数据帧的三种方式'><span>交换机处理数据帧的三种方式</span></h3><blockquote><p><strong><span>转发</span></strong><span>：交换机根据MAC地址表把数据从某个接口转发出去</span>
<strong><span>泛洪</span></strong><span>：交换机接收数据帧从一个端口进来，从其他所有接口都发送出去</span>
<strong><span>丢弃</span></strong><span>：交换机丢弃数据帧</span><br>
<strong><span>执行转发</span></strong>
<span>• 在MAC地址表中能够查询到目的MAC地址</span>
<strong><span>执行泛洪</span></strong>
<span>• 只要目的MAC地址是组播或广播，不看MAC地址表直接泛洪</span>
<span>• 如果目的MAC地址为单播，但在MAC地址表中查不到（未知单播帧）</span></p></blockquote><h3 id='三层防环'><span>三层防环</span></h3><blockquote><p><span>１. IP报文头部格式自身就可以一定程度防环（TTL生存时间）</span>
<span>２. 态路由协议自身就有各自的防环机制</span></p></blockquote><h3 id='环路会带来两个主要问题'><span>环路会带来两个主要问题</span></h3><blockquote><ul><li><span>MAC地址震荡（MAC地址漂移）</span></li><li><span>广播风暴</span></li></ul></blockquote><h3 id='vlan虚拟局域网'><span>VLAN虚拟局域网</span></h3><blockquote><p><span>把一个大的广播域通过技术隔离成若干小的广播域</span>
<span>实现： 通过标签tag来实现区分</span>
<span>通过在交换机上给数据帧打上标签（VLAN ID的tag标签来区分）</span></p></blockquote><h3 id='8021q数据帧'><span>802.1Q数据帧</span></h3><blockquote><p><span>802.1Q数据帧（VLAN数据帧） tag：</span>
<span>802.1Q Virtual LAN, PRI: 0, DEI: 0, ID: 10</span></p><ol start='000' ><li><span>.... .... .... = Priority: Best Effort (default) (0)</span></li></ol></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ...0 .... .... .... = DEI: Ineligible</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  .... 0000 0000 1010 = ID: 10 &nbsp; &nbsp; ****VLAN ID  也就是tag标签</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>  802.1Q也叫标签帧</span></p><h3 id='以太网ii帧格式'><span>以太网II帧格式</span></h3><blockquote><p><span>源目MAC   type    数据   FCS</span>
<span>802.1Q帧格式：</span>
<span>源目MAC   </span>&emsp;<span>tag   </span>&emsp;<span>type    </span>&emsp;<span>数据   </span>&emsp;<span>FCS</span></p></blockquote><h3 id='交换机vlan实验配置'><span>交换机VLAN实验配置</span></h3><p><span>1、创建VLAN池（创建将要出现的vlan）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[SW1]vlan xxx &nbsp; #创建vlan ID为xxx</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[SW1]vlan batch xxx xxx  #同时设置两个vlan</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vlan 10 to 20 &nbsp; #创建vlan10 ~ 20</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">取值范围0~4095  配置范围1-4094，0和4095保留，默认为1</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>2、关键主要在交换机的接口上进行配置</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">选择接口类型（必配） access接口配置步骤</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[SW1-GigabitEthernet0/0/1]port link-type access #接口类型有三种</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">配置access接口的PVID（默认的VLAN ID）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[SW1-GigabitEthernet0/0/1]port default vlan 100　 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#设置access接口PVID为100</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 114px;"></div><div class="CodeMirror-gutters" style="display: none; height: 114px;"></div></div></div></pre><blockquote><p><span>相同vlan之间能够直接进行二层通信</span>
<span>不同vlan之间不能直接进行二层通信</span>
<span>可以借助三层设备进行三层通信</span></p></blockquote><h3 id='为什么要打标签摘标签'><span>为什么要打标签/摘标签</span></h3><p><span>打标签摘标签也就是VLAN的关键技术</span></p><ul><li><span>打标签用来区分VLAN</span></li><li><span>摘标签主机/PC、服务端、客户端、路由器都无法识别802.1Q数据帧，所以得摘标签才能识别</span></li></ul><h3 id='怎么打标签摘标签'><span>怎么打标签/摘标签</span></h3><p><span>通过交换机的接口来实现，不同接口类型功能有点不一样</span></p><h3 id='交换机的接口端口）类型'><span>交换机的接口（端口）类型</span></h3><p><span>从两个角度考虑：接口接收数据帧，接口发送数据帧</span></p><h4 id='access接口'><span>Access接口</span></h4><p><span>一个access接口只能够允许通过一个vlan，且只对一种vlan打标签/摘标签</span>
<span>一般部署在连接PC/服务器/路由器端的交换机接口</span>
<span>access口的pvid就是允许通过列表</span></p><blockquote><p><strong><span>接口接收数据帧</span></strong></p><ul><li><span>接收带标签的数据帧，会拿VID与接口的PVID进行比较，相同接收，不同丢弃</span></li><li><span>接收不带标签的数据帧，会先给数据帧打上接口VID标签（PVID），接收</span></li><li><span>总之交换机内部数据帧肯定要有标签</span></li></ul><p><strong><span>接口发送数据帧</span></strong></p><ul><li><span>数据帧准备从所有接口泛洪出去，比较数据帧的VID与接口的PVID是否相同，相同则摘标签发送出去，不同则丢弃</span></li></ul></blockquote><h4 id='trunk接口'><span>Trunk接口</span></h4><p><span>干道接口，一般部署在交换机之间</span>
<span>一个trunk接口允许通过多个vlan（允许通过列表），只允许对一个vlan打标签/摘标签（只有一个PVID）</span>
<mark><span>能不能出主要看允许通过列表，1默认允许通过</span></mark></p><blockquote><p><strong><span>接口接收数据帧</span></strong>
<span>只是判断是否接收，而且接收后一定后标签</span></p><ul><li><span>若接收带标签的数据帧，先查看接口配置的允许通过列表，在列表则接收，不在列表丢弃</span></li><li><span>若接收不带标签的数据帧，先打上VID（接口的PVID），再去查看VID是否允许通过列表中，在则接收，不在丢弃</span></li></ul><p><strong><span>接口发送数据帧</span></strong>
<span>三种情况：带标签出去，不带标签出去，丢弃出不去</span></p><ul><li><span>数据从接口准备出去，首先查看允许通过列表，查看VID是否在允许通过列表中，在列表中则可以出去，不在表中则丢弃出不去</span></li><li><span>数据从接口准备出去，首先查看允许通过列表，查看VID是否在允许通过列表中，继续查看VID是与接口PVID相同，若相同则摘标签出去，不同则带标签出去</span></li></ul></blockquote><h5 id='trunk接口配置步骤'><span>Trunk接口配置步骤</span></h5><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">SW1</span><span class="cm-punctuation">]</span><span class="cm-identifier">interface</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">3</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">SW1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">3</span><span class="cm-punctuation">]</span><span class="cm-identifier">port</span> <span class="cm-identifier">link-type</span> <span class="cm-identifier">trunk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#选择接口类型（必配）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">SW1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">3</span><span class="cm-punctuation">]</span><span class="cm-identifier">port</span> <span class="cm-identifier">trunk</span> <span class="cm-identifier">allow-pass</span> <span class="cm-identifier">vlan</span> <span class="cm-number">100</span> <span class="cm-number">200</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#trunk接口的允许通过列表（默认允许通过1）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">SW1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">3</span><span class="cm-punctuation">]</span><span class="cm-identifier">port</span> <span class="cm-identifier">trunk</span> <span class="cm-identifier">pvid</span> <span class="cm-identifier">vlan</span> <span class="cm-identifier">xxx</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置接口的pvid，默认为1（可选配置）摘标签</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 160px;"></div><div class="CodeMirror-gutters" style="display: none; height: 160px;"></div></div></div></pre><h4 id='hybrid接口'><span>Hybrid接口</span></h4><p><span>（华为独有）在trunk接口上优化了，支持多个vlan摘标签</span></p><blockquote><p><strong><span>接口接收数据帧：</span></strong>
<span>与trunk接口类型一样，都是先看允许通过列表，只是Hybrid的允许通过列表不一样</span></p><p><span>允许通过列表分为两种：</span></p><ul><li><span>tag允许通过列表（带标签出去）</span></li><li><span>untag允许通过列表（摘标签允许通过列表）</span></li></ul><p><strong><span>接口发送数据帧</span></strong>
<span>数据准备从接口发送出去，先查看允许通过列表</span>
<span>若在允许通过列表中，在tag允许通过列表中，则带标签出去；在untag允许通过列表中，则摘标签出去</span>
<span>若不在允许通过列表中，则丢弃</span><br>
<span>现阶段都是使用交换机接口来划分vlan的，也有其它方法，如基于MAC地址划分</span>
<span>基于接口划分vlan</span>
<span>现阶段实验部署，一个网段就是划分一个vlan</span></p></blockquote><h3 id='实现vlan间通信'><span>实现VLAN间通信</span></h3><ul><li><mark><span>通过物理接口</span></mark><span>实现VLAN间通信</span>
<span>缺陷：占用大量的路由器物理接口，成本高</span></li><li><mark><span>路由器子接口</span></mark><span>（单臂路由）</span>
<span>可以解决物理接口不足的问题，但也可能导致传输效率低</span></li><li><mark><span>三层逻辑接口vlanif</span></mark>
<span>正常进入三层逻辑接口配置地址</span>
<span>不管是vlanif逻辑接口还是子接口都是能够接收数据帧时摘标签，发送数据时打标签</span></li></ul><h3 id='子接口实验步骤'><span>子接口实验步骤</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1.</span> <span class="cm-error">进入路由器子接口视图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">interface</span> <span class="cm-identifier">GigabitEthernet</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">进入子接口视图配置地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2.</span> <span class="cm-error">设置子接口的终结</span><span class="cm-identifier">vid</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0.1</span><span class="cm-punctuation">]</span><span class="cm-identifier">dot1q</span> <span class="cm-identifier">termination</span> <span class="cm-identifier">vid</span> <span class="cm-number">100</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.</span> <span class="cm-error">开启子接口</span><span class="cm-identifier">ARP</span><span class="cm-error">广播应答功能</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0.1</span><span class="cm-punctuation">]</span><span class="cm-identifier">arp</span> <span class="cm-identifier">broadcast</span> <span class="cm-identifier">enable</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 160px;"></div><div class="CodeMirror-gutters" style="display: none; height: 160px;"></div></div></div></pre><h2 id='stp生成树'><span>STP生成树</span></h2><p><mark><span>二层带来冗余的同时会产生环路，通过STP生成树消除二层环路</span></mark>
<span>通过阻塞某些交换机的某些端口来实现消除环路</span>
<span>而生成树就是找出哪些端口来进行阻塞</span></p><h3 id='生成树工作过程'><span>生成树工作过程</span></h3><blockquote><p><span>１. 首先确定交换机的角色：根桥、非根桥交换机</span>
<span>２. 其次确认交换机的端口角色：根端口RP、指定端口DP、阻塞端口AP</span><br>
<span>根端口RP：每台非根交换机上去往根桥最优的端口（每台非根交换机有且只有一个）</span>
<span>指定端口DP：是每条链路上去往根桥的最优端口</span>
<span>剩下的非根非指定端口就是阻塞端口</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[SW1]display stp brief  #查看交换机STP端口角色</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3 id='stp通过bpdu网络协议数据单元）'><span>STP通过BPDU（网络协议数据单元）</span></h3><h4 id='第一部分bpdu标识部分'><span>第一部分：BPDU标识部分</span></h4><blockquote><p><strong><span>Protocol Identifier</span></strong><span>:协议ID、固定值标明该数据帧为生成树协议 (0x0000)</span>
<strong><span>Protocol Version Identifier</span></strong><span>: STP生成树版本，0x00为标准生成树STP、02为RSTP、03为MSTP</span>
<strong><span>BPDU Type</span></strong><span>: BPDU类型   0x00为STP的配置BPDU、0x80的TCN BPDU</span>
<strong><span>flags</span></strong><span>：有多个比特，TC比特（告知拓扑变更）、TCA比特（响应拓扑变更）</span></p></blockquote><h4 id='第二部分选举参数'><span>第二部分：选举参数</span></h4><blockquote><p><strong><span>Root Identifier</span></strong><span>: 根桥的BID、告知哪个是根桥</span>
<strong><span>Root Path Cost</span></strong><span>:RPC根路径开销，根到达该端口的端口开销之和</span>
<strong><span>Bridge Identifier</span></strong><span>: BID桥ID、每台交换机身份码，有两部分组成：桥优先级＋MAC地址</span><br>
<span>注意：桥优先级为2字节，但只有高4比特有效，以4096的倍数进行增长</span>
<span>以4096为步长，默认32768、范围0-61440</span>
<span>Port identifier:PID端口ID、每个端口的身份码、有两部分组成：端口优先级+端口编号</span>
<span>注意：端口优先级1字节，但只有高4比特有效，以16的倍数进行增长</span>
<span>以16为步长，默认128，范围0-210</span></p></blockquote><h4 id='第三部分时间参数'><span>第三部分：时间参数</span></h4><blockquote><p><strong><span>Message Age</span></strong><span>: 消息时间，存在的时间</span>
<strong><span>Max Age</span></strong><span>:最大老化时间、默认20s</span>
<strong><span>Hello Time</span></strong><span>:周期发送BPDU时间、默认2s</span>
<strong><span>Forward Delay</span></strong><span>:转发延迟时间，默认15s</span></p></blockquote><h3 id='报文字段'><span>报文字段</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Spanning Tree Protocol</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Protocol Identifier: Spanning Tree Protocol (0x0000)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Protocol Version Identifier: Multiple Spanning Tree (3)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  BPDU Type: Rapid/Multiple Spanning Tree (0x02)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  BPDU flags: 0x7c, Agreement, Forwarding, Learning, Port Role: Designated</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Root Identifier: 32768 / 0 / 4c:1f:cc:73:29:06</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Root Path Cost: 0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Bridge Identifier: 32768 / 0 / 4c:1f:cc:73:29:06</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Port identifier: 0x8001</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Message Age: 0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Max Age: 20</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Hello Time: 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Forward Delay: 15</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Version 1 Length: 0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Version 3 Length: 64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  MST Extension</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 366px;"></div><div class="CodeMirror-gutters" style="display: none; height: 366px;"></div></div></div></pre><h3 id='生成树的角色选举过程'><span>生成树的角色选举过程</span></h3><p><span>1、首先确定根桥</span></p><blockquote><p><span>每台交换机一开始都以为自己的根桥向其他设备发送配置BPDU</span>
<mark><span>BID=桥优先级（2字节）+设备的VLAN的MAC地址（6字节）</span></mark>
<span>进行比较BID，先比较桥优先级（数值越小越优），以4096为步长，默认32768、范围0-61440</span>
<span>再比较MAC地址（数值越小越优）</span><br/><span>确定好根桥后，其余设备就是非根桥</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">stp priority 0  #设置优先级</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">dis stp brief &nbsp; #查看STP配置</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>2、其次再去确定端口角色</span></p><blockquote><ul><li><mark><span>先在每台非根交换机上确定唯一一个RP根端口</span></mark><span>（每个接口默认20000）</span>
<span>1、RPC根路径开销</span>
<span>2、对端的BID（端口对面交换机BID）</span>
<span>3、对端的PID</span>
<span>4、本端的PID</span></li><li><mark><span>在每条链路上确定一个DP指定端口</span></mark>
<span>1、RPC根路径开销</span>
<span>2、本端的BID</span>
<span>3、本端的PID</span></li><li><mark><span>剩下的非根非指定就是AP阻塞端口</span></mark></li></ul></blockquote><p><span>3、对阻塞端口进行阻塞来消除环路</span></p><h3 id='端口状态'><span>端口状态</span></h3><figure><table><thead><tr><th style='text-align:center;' ><span>端口状态</span></th><th style='text-align:center;' ><span>BPDU接收</span></th><th style='text-align:center;' ><span>BPDU发送</span></th><th style='text-align:center;' ><span>学习MAC</span></th><th style='text-align:center;' ><span>转发流量</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>禁用disable</span></td><td style='text-align:center;' ><span>✕</span></td><td style='text-align:center;' ><span>✕</span></td><td style='text-align:center;' ><span>✕</span></td><td style='text-align:center;' ><span>✕</span></td></tr><tr><td style='text-align:center;' ><span>阻塞blocking</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✕</span></td><td style='text-align:center;' ><span>✕</span></td><td style='text-align:center;' ><span>✕</span></td></tr><tr><td style='text-align:center;' ><span>侦听listening</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✕</span></td><td style='text-align:center;' ><span>✕</span></td></tr><tr><td style='text-align:center;' ><span>学习learning</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✕</span></td></tr><tr><td style='text-align:center;' ><span>转发forwarding</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✓</span></td><td style='text-align:center;' ><span>✓</span></td></tr></tbody></table></figure><blockquote><p><span>最终AP阻塞端口处于阻塞状态，DP／RP处于端口转发</span>
<span>两个转发延迟时间</span>
<span>从侦听到学习会有一个转发延迟时间，等待15s所有端口选举完成，避免在选举过程中产生临时环路</span>
<span>从学习到转发也会有个转发延迟时间，等待15s交换机构建新的MAC地址表，避免设备在构建新的MAC地址表产生新的错误路径/未知单播帧泛洪</span></p></blockquote><p><span>在STP生成树中，只有根桥会周期发送BPDU，其它非根桥设备只有收到根桥的BPDU后才会转发</span>
<span>阻塞端口可以接收BPDU不能发送BPDU</span></p><h3 id='stp常见故障典例'><span>STP常见故障典例</span></h3><blockquote><p><strong><span>根桥故障</span></strong>
<mark><span>恢复时间：老化时间+2倍的转发延迟时间=50s</span></mark>
<span>（现阶段STP是优化的，收不到根桥的BPDU）</span>
<strong><span>直连故障</span></strong>
<mark><span>恢复时间：2倍的转发延迟时间=30s</span></mark><span>（设备直接感知出现故障，可以收到根桥的BPDU）</span>
<strong><span>非直连故障</span></strong>
<mark><span>恢复时间：老化时间+2倍的转发延迟时间=50s</span></mark><span>（感受不到根桥的BBDU）</span>
<span>总之出现故障后能够收到根桥的BPDU，那就不与要等待老化时间即30s；收不到根桥的BPDU那就需要等待老化时间+2倍的转发延迟时间即50s</span></p></blockquote><h3 id='stp树的拓补变更机制'><span>STP树的拓补变更机制</span></h3><p><span>作用：拓补发生变更，拓补变更机制把原本MAC地址表的300s时间变为15s加快老化，若没有此机制则产生错误路径</span></p><blockquote><p><strong><span>拓补变更机制过程</span></strong><span>：</span></p><ol start='' ><li><span>发生变化的设备发送TCN BPDU给上游设备</span>
<span>上游设备收到TCN BPDU一边向上游继续泛洪TCN</span>
<span>另一边发送TCA置位的配置BPDU告知下游设备停止发送TCN　BPDU</span></li><li><span>直到根桥收到TCN　BPDU，向下游回应TC置位的配置BPDU</span>
<span>目的是想要设备加快MAC地址地址时间，把300s变为15s加快老化</span></li></ol></blockquote><h2 id='链路聚合'><span>链路聚合</span></h2><blockquote><p><span>也叫链路捆绑，把多条物理链路逻辑看成一条链路</span>
<span>聚合后的接口为聚合接口，每条物理链路都为成员链路</span>
<span>注意：成员链路有两种，一种为活动链路，另一种为非活动链路</span>
<span>一般最多只能聚合8根链路，而且聚合两端双工模式得一样，速率、流控方式、两边聚合的端口号得相同，聚合后当成一条正常链路使用。</span></p></blockquote><p><span>交换机设置链路聚合可以提高带宽</span>
<span>路由器设置链路聚合可以减小路由表规模</span></p><h3 id='手工静态链路聚合'><span>手工静态链路聚合</span></h3><p><span>注意：成员链路（被聚合）接口不能单独配置</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1.</span><span class="cm-error">创建聚合接口（</span><span class="cm-identifier">Eth-Trunk</span><span class="cm-error">接口）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1</span><span class="cm-punctuation">]</span><span class="cm-identifier">interface</span> <span class="cm-identifier">Eth-Trunk</span> <span class="cm-error">接口编号</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2.</span><span class="cm-error">往聚合接口里加入成员接口</span><span class="cm-operator">/</span><span class="cm-error">链路</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1</span><span class="cm-operator">-</span> <span class="cm-identifier">Eth-Trunk1</span><span class="cm-punctuation">]</span><span class="cm-identifier">trunkport</span> <span class="cm-identifier">GigabitEthernet</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span> <span class="cm-identifier">to</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">3</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#默认为手工静态负载分担，没有非活动链路</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1</span><span class="cm-punctuation">]</span><span class="cm-identifier">display</span> <span class="cm-identifier">eth-trunk</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#查看聚合信息</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 160px;"></div><div class="CodeMirror-gutters" style="display: none; height: 160px;"></div></div></div></pre><h3 id='静态lacp模式'><span>静态LACP模式</span></h3><p><span>可以支持选择活动链路数，确定非活动链路</span>
<span>有报文交互，可以感知链路故障</span></p><blockquote><p><span>通过LCAPDU</span>
<span>设备优先级用于选举主从（默认32768、2字节，数值越小越优先）</span>
<span>MAC地址</span>
<span>端口优先级用于选举端口活动链路（默认32768、2字节，数值越小越优先）</span>
<span>端口编号</span>
<span>注意：设备间默认允许抢占，端口之间默认不开启抢占</span></p></blockquote><h3 id='静态lacp模式实验步骤'><span>静态LACP模式实验步骤</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1.</span><span class="cm-error">创建聚合接口</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1</span><span class="cm-punctuation">]</span><span class="cm-identifier">interface</span> <span class="cm-identifier">Eth-Trunk</span> <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#进入聚合接口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2.</span><span class="cm-error">选择聚合模式静态</span><span class="cm-identifier">LACP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1-Eth-Trunk1</span><span class="cm-punctuation">]</span><span class="cm-identifier">mode</span> <span class="cm-identifier">lacp-static</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#静态LACP模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.</span><span class="cm-error">确定最大活动链路数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1-Eth-Trunk1</span><span class="cm-punctuation">]</span><span class="cm-identifier">max</span> <span class="cm-identifier">active-linknumber</span> <span class="cm-number">2</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#最大活动链路数（另一边可不设置）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4.</span><span class="cm-error">加入成员物理链路</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1-Eth-Trunk1</span><span class="cm-punctuation">]</span> <span class="cm-identifier">trunkport</span> <span class="cm-identifier">GigabitEthernet</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span> <span class="cm-identifier">to</span> <span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">3</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">注：端口间默认不开启抢占，需手工开启抢占功能</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1-Eth-Trunk1</span><span class="cm-punctuation">]</span><span class="cm-identifier">lacp</span> <span class="cm-identifier">preempt</span> <span class="cm-identifier">enable</span> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#开启端口抢占</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">S1-Eth-Trunk1</span><span class="cm-punctuation">]</span><span class="cm-identifier">lacp</span> <span class="cm-identifier">preempt</span> <span class="cm-identifier">delay</span> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#抢占延迟时间，默认30s</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Eth-Trunk1</span><span class="cm-punctuation">]</span><span class="cm-identifier">undo</span> <span class="cm-identifier">portswitch</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#关闭二层端口变为三层端口，二层接口不能配地址</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 526px;"></div><div class="CodeMirror-gutters" style="display: none; height: 526px;"></div></div></div></pre><h3 id='区别'><span>区别</span></h3><p><span>有无备份</span>
<span>故障变化</span></p><h3 id='负载分担方式'><span>负载分担方式</span></h3><blockquote><p><span>逐包：每次报文发送时，都与上一次不同</span>
<span>逐流：每次报文发送时，都与上一次相同</span></p></blockquote><h3 id='五元组来大致区分数据流'><span>五元组来大致区分数据流</span></h3><blockquote><p><span>源IP、目的IP、源端口、目的端口、协议</span></p></blockquote><h3 id='负载分担模式'><span>负载分担模式</span></h3><blockquote><p><span>基于源IP、源MAC、目的IP、目的MAC、源目IP、源目MAC</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[S1-Eth-Trunk1]load-balance</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#按需求选择合适的模式</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h2 id='安全应用模块'><span>安全应用模块</span></h2><h3 id='acl访问控制列表'><span>ACL访问控制列表</span></h3><p><span>就是一个匹配工具，搭配其它策略进行使用</span>
<span>由一系列语句规则组成</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">acl</span> <span class="cm-number">2000</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建ACL，2000为编号，编号区间不同，acl功能不同</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-acl-basic-2000</span><span class="cm-punctuation">]</span><span class="cm-identifier">rule</span> <span class="cm-number">5</span> <span class="cm-identifier">permit</span> <span class="cm-identifier">source</span> <span class="cm-number">192.168.2.0</span> <span class="cm-number">0.0.0.255</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#5为规则编号、用于规则排序，默认为5，以5为步长，便于之后加入规则</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-acl-basic-2000</span><span class="cm-punctuation">]</span><span class="cm-identifier">step</span> <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#修改步长</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 137px;"></div><div class="CodeMirror-gutters" style="display: none; height: 137px;"></div></div></div></pre><p><font style="font-weight:bold;font-size:15px;"><span>permit source 192.168.2.0 0.0.0.255</span></font></p><blockquote><p><strong><span>permit</span></strong>
<span>匹配动作有两种：permit允许/deny拒绝</span>
<span>具体含义需要根据调用的策略</span>
<strong><span>source</span></strong>
<span>指定源</span>
<strong><span>192.168.2.0</span></strong>
<span>匹配项，用于匹配参考</span>
<strong><span>0.0.0.255</span></strong>
<span>通配符，用于选择，搭配匹配项使用，为1任意匹配，为0严格匹配，灵活匹配</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0010.0000 0000 &nbsp; 匹配项</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0000 0000.0000 0000.0000 0000.1111 1111 &nbsp; 通配符</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='通配符匹配练习'><span>通配符匹配练习</span></h3><p><span>1、过滤区分172.16.1.0/24其中的一半地址，0~127</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1010 1100.0001 0000.0000 0001.0000 0000 &nbsp; 0</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1010 1100.0001 0000.0000 0001.0111 1111 &nbsp; 127</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-acl-basic-2000]rule 5 permit source 172.16.1.0 0.0.0.127</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-acl-basic-2000]rule 5 deny source 172.16.1.128 0.0.0.127</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-acl-basic-2000]rule 6 permit source 172.16.1.0 0.0.0.255</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 137px;"></div><div class="CodeMirror-gutters" style="display: none; height: 137px;"></div></div></div></pre><p><span>2、192.168.10.10   </span>&emsp;<span>0.1.0.1匹配的是哪些地址</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 1010.0000 1010 &nbsp; 匹配项</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0000 0000.0000 0001.0000 0000.0000 0001 &nbsp; 通配符</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.1010 1000.10.0000 1010 &nbsp; &nbsp; 192.168.10.10</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.1010 1000.10.0000 1011 &nbsp; &nbsp; 192.168.10.11</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.1010 1001.10.0000 1010 &nbsp; &nbsp; 192.169.10.10</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.1010 1001.10.0000 1011 &nbsp; &nbsp; 192.169.10.11 </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 137px;"></div><div class="CodeMirror-gutters" style="display: none; height: 137px;"></div></div></div></pre><p><span>3、若要匹配拒绝192.168.1.100/27网段内所有地址，该如何书写</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0100 0000.1010 1000.0000 0001.0110 0100 &nbsp; 匹配项</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0000 0000.0000 0000.0000 0000.0001 1111 &nbsp; 通配符</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-acl-basic-2000]rule 5 deny source 192.168.1.100 0.0.0.31</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>4、若某机房部署格局分为左右两边，该机房主机都为网段192.168.1.0/24</span>
<span>  </span>&emsp;&ensp;<span>左边地址尾号为1、3、5、7、9、11.......</span>
<span>  </span>&emsp;&ensp;<span>右边地址尾号为2、4、6、8、10、12.......</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0000 &nbsp; 0</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0001 &nbsp; 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0010 &nbsp; 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0011 &nbsp; 3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">最后1bit取值为1时为奇数</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1100 0000.1010 1000.0000 0001.0000 0001 &nbsp; 匹配项</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0000 0000.0000 0000.0000 0000.0000 0001 &nbsp; 通配符</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[R1-acl-basic-2000]rule deny source 192.168.1.1 0.0.0.254</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">匹配奇偶性</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">192.168.1.1 &nbsp; 0.0.0.254 &nbsp; 匹配项为奇数，通配符0.0.0.254</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 229px;"></div><div class="CodeMirror-gutters" style="display: none; height: 229px;"></div></div></div></pre><h3 id='acl种类'><span>ACL种类</span></h3><blockquote><p><span>基本ACL：2000~2999</span>
&emsp;&emsp;&emsp;&emsp;<span>一般基于源进行定义</span>
<span>高级ACL：3000~3999</span>
&emsp;&emsp;&emsp;&emsp;<span>不但可以指定源，还可以指定目的、协议、源目端口</span>
<span>二层ACL：4000~4999</span>
&emsp;&emsp;&emsp;&emsp;<span>源MAC地址、目的MAC地址、以太帧协议类型</span>
<span>用户ACL：5000~5999</span>
<span>自定义ACL：6000以上</span></p></blockquote><h3 id='acl匹配原则'><span>ACL匹配原则</span></h3><p><span>一旦命中，立即停止，不会继续查看后续规则</span>
<font color=red><span>默认按rule规则编号从小到大顺序匹配</span></font></p><h3 id='策略路由-过滤策略'><span>策略路由-过滤策略</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">traffic-filter</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">inbound &nbsp; &nbsp; 入站流量方向</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">outbound &nbsp;  出站流量方向</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><font color=#f2c547>
<span>只能过滤流量，动作继承匹配工具ACL的动作</span><br>
<span>最后一条默认的规则：允许所有</span>
</font></p><h3 id='traffic-filter流量过滤实验步骤'><span>traffic-filter流量过滤实验步骤</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1.</span> <span class="cm-error">创建</span><span class="cm-identifier">ACL</span><span class="cm-error">（不同种类</span><span class="cm-identifier">ACL</span><span class="cm-error">、功能不同）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">acl</span> <span class="cm-identifier">number</span> <span class="cm-number">2000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2.</span> <span class="cm-error">规划设计</span><span class="cm-identifier">ACL</span><span class="cm-error">内规则</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">rule</span> <span class="cm-number">10</span> <span class="cm-identifier">deny</span> <span class="cm-identifier">source</span> <span class="cm-number">192.168.1.0</span> <span class="cm-number">0.0.0.255</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">rule</span> <span class="cm-number">15</span> <span class="cm-identifier">permit</span> <span class="cm-identifier">source</span> <span class="cm-number">192.168.2.0</span> <span class="cm-number">0.0.0.255</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.</span> <span class="cm-error">在接口上进行使用</span><span class="cm-identifier">traffic-filter</span><span class="cm-error">策略调用</span><span class="cm-identifier">ACL</span><span class="cm-error">，需注意方向</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">2</span><span class="cm-punctuation">]</span><span class="cm-identifier">traffic-filter</span> <span class="cm-identifier">outbound</span> <span class="cm-identifier">acl</span> <span class="cm-number">2000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 206px;"></div><div class="CodeMirror-gutters" style="display: none; height: 206px;"></div></div></div></pre><p><span>查看配置</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">display acl 2000</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#验证配置的基本ACL</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">display  traffic-filter applied-record </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#查看设备上所有基于ACL进行报文过滤的应用信息</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><h3 id='高级acl示例'><span>高级ACL示例</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="text"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="text"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">acl number 3000 &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> rule 5  deny &nbsp; icmp source 192.168.1.0 0.0.0.255 destination 192.168.3.1 0 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> rule 10 permit icmp source 192.168.1.0 0.0.0.255 destination 192.168.3.2 0 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">acl number 3001 &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> rule 5 permit tcp source 192.168.1.0 0.0.0.255 destination 192.168.2.1 0 destination-port eq telnet </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">acl number 3000 &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> rule 5 deny icmp source 192.168.1.0 0.0.0.255 destination 192.168.2.0 0.0.0.255 icmp-type echo </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 229px;"></div><div class="CodeMirror-gutters" style="display: none; height: 229px;"></div></div></div></pre><h3 id='nat网络地址转换'><span>NAT网络地址转换</span></h3><p><span>通过地址转换节约公网IP地址</span>
<mark><span>基于源转换</span></mark><span>：就是数据源IP地址进行转换</span></p><ul><li><strong><span>静态NAT</span></strong>
<font color=#289f44><span>[一对一]一个公网地址对应一个私有地址，没有节约地址资源，支持双向访问</span></font></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">ststic</span> <span class="cm-identifier">global</span> <span class="cm-number">100.1.1.1</span> <span class="cm-identifier">inside</span> <span class="cm-number">192.168.1.1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#把一个内网地址192.168.1.1映射出一个公网地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#公网地址使用网段内的空闲地址</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><ul><li><strong><span>动态NAT</span></strong>
<font color=#289f44><span>[一对一]一个公网地址（地址池的）对应一个私有地址</span><br><span>没有节约公网地址资源，但是有地址池，可以提高地址的利用效率(地址池可回收地址)</span></font></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">address-group</span> <span class="cm-number">1</span> <span class="cm-number">100.1.1.10</span> <span class="cm-number">100.1.1.20</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建NAT地址池，地址池名称0~7，起始地址范围</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">acl</span> <span class="cm-number">2000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-basic-acl-2000</span><span class="cm-punctuation">]</span><span class="cm-identifier">rule</span> <span class="cm-number">5</span> <span class="cm-identifier">permit</span> <span class="cm-identifier">source</span> <span class="cm-number">192.168.1.0</span> <span class="cm-number">0.0.0.255</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建ACL可以使哪些地址能调用地址池</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">interface</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">outbound</span> <span class="cm-number">2000</span> <span class="cm-identifier">address-group</span> <span class="cm-number">1</span> <span class="cm-identifier">no-pat</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在接口调用地址池与ACL，no-pat不进行端口转换</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 183px;"></div><div class="CodeMirror-gutters" style="display: none; height: 183px;"></div></div></div></pre><ul><li><strong><span>NAPT</span></strong>
<font color=#289f44><span>[一对多]一个公网地址（地址池的）映射多个私有地址</span><br><span>一个公网地址的一个端口对应一个私有地址，具有多个端口就能对应多个私有地址</span></font></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">acl</span> <span class="cm-number">2000</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-basic-acl-2000</span><span class="cm-punctuation">]</span><span class="cm-identifier">rule</span> <span class="cm-number">5</span> <span class="cm-identifier">permit</span> <span class="cm-identifier">source</span> <span class="cm-number">192.168.1.1</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">address-group</span> <span class="cm-number">1</span> <span class="cm-number">100.1.1.100</span> <span class="cm-number">100.1.1.110</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">outbound</span> <span class="cm-number">2000</span> <span class="cm-identifier">address-group</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#支持端口转换，不需要no-pat</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 114px;"></div><div class="CodeMirror-gutters" style="display: none; height: 114px;"></div></div></div></pre><ul><li><strong><span>Easy IP</span></strong>
<font color=#289f44><span>[一对多]一个公网地址（出接口）对应多个私有地址</span></font></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">outbound</span> <span class="cm-number">2000</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#不需要地址池，直接用出接口地址作为公网地址</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3 id='基于目的转换-nat-sever'><span>基于目的转换-NAT Sever</span></h3><p><span>一般用于内网服务器到公网中，实现通过映射的公网地址访问到内网服务器</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-identifier">nat</span> <span class="cm-identifier">server</span> <span class="cm-identifier">protocal</span> <span class="cm-identifier">tcp</span> <span class="cm-identifier">global</span> <span class="cm-number">100.1.1.200</span> <span class="cm-identifier">ftp</span> <span class="cm-identifier">inside</span> <span class="cm-number">192.168.1.4</span> <span class="cm-identifier">ftp</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#公有地址端口 映射 私有地址端口号</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h2 id='广域网技术'><span>广域网技术</span></h2><h3 id='ppp点到点协议）'><span>PPP（点到点协议）</span></h3><p><span>PPP协议是一种点到点链路层协议，主要用于在全双工的同异步链路上进行点到点的数据传输。</span></p><blockquote><ol start='' ><li><span>提供链路层参数协商LCP（Link Control Protocol）</span></li><li><span>提供网络层参数协商NCP（Network Control Protocol）</span></li><li><span>提供网络认证</span>
<span>CHAP（Challenge-Handshake Authentication Protocol）</span>
<span>PAP（Password Authentication Protocol）</span>
<span>更好的保证了网络的安全性</span></li><li><span>扩展性好，如：当需要在以太网链路上承载PPP协议时，PPP可以扩展为PPPoE</span></li></ol></blockquote><h3 id='ppp协议簇-三个组件'><span>PPP协议簇-三个组件</span></h3><ul><li><span>LCP：链路控制协议，主要用于监控，建立、拆除链路</span></li><li><span>NCP：网络控制协议，协商网络层参数、IPCP</span></li><li><span>安全认证（可选）：PAP认证（明文），CHAP认证（密文）</span></li></ul><h3 id='ppp工作原理'><span>PPP工作原理</span></h3><ol start='' ><li><span>PPP链路从死亡阶段（刚开启时）到建立阶段进行LCP协商（MRU，魔术字，认证模式）</span>
<span>协商成功则进入下一阶段；协商失败回到死亡阶段</span>
<span>[魔术字：随机生成的参数列表，用于检测环路]</span></li><li><span>在认证阶段进行认证（PAP/CHAP）</span>
<span>认证成功，进入下一阶段网络阶段；认证失败，回到终结阶段（等待阶段）尝试是否能重新建立</span></li><li><span>在网络阶段进行网络参数NCP协商（IPCP-IP地址控制协议）</span>
<span>协商成功保持链路通信；协商失败回到终结阶段</span></li></ol><blockquote><p><span>Dead死亡阶段：链路开始之初的状态</span>
<span>Establish建立阶段：进行LCP协商（MRU，魔术字，认证模式）</span>
<span>Authenticate认证阶段：进行认证（PAP、CHAP）</span>
<span>Network网络阶段：进行NCP协商（IPCP）</span>
<span>Terminate终结阶段：等待资源释放（认证失败，协商失败等）</span></p></blockquote><h3 id='ppp各组件协商过程'><span>PPP各组件协商过程</span></h3><h4 id='lcp链路层协商参数'><span>LCP链路层协商参数</span></h4><blockquote><ul><li><span>MRU（最大传输单元，默认1500字节）</span></li><li><span>魔术字（用于防环）</span></li><li><span>认证模式（得需要两边认证模式相同，默认不认证）</span></li></ul></blockquote><h4 id='协商方式'><span>协商方式</span></h4><p><span>通过报文：</span><font color='cornflowerblue'><span>LCP协议报文</span></font>
<span>每3s发送一次，连续十次没有回应则认为链路故障</span></p><blockquote><ul><li><span>Request请求报文：携带链路层参数</span></li></ul><p><span>回应结果：</span></p><ul><li><span>ACK报文：用于确认，确保参数协商成功；双方都收到ACK报文LCP才协商成功</span></li><li><span>NAK报文：参数不匹配发送，携带修改后允许的参数</span></li><li><span>Reject报文：参数不识别发送，携带需要删除的不识别的参数</span></li></ul></blockquote><h3 id='安全认证'><span>安全认证</span></h3><h4 id='pap明文认证'><span>PAP明文认证</span></h4><p><font color=red><span>两次握手，交互明文报文（携带用户名和密码）</span></font></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">认证方配置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">s1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">pap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#选择认证模式-pap模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">aaa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#进入aaa模式，只需要创建用户名和密码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span><span class="cm-identifier">local-user</span> <span class="cm-identifier">cwl</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-number">123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建数据库，保存用户的账户名和密码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">被认证方配置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">s1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">pap</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">cwl</span> <span class="cm-identifier">password</span> <span class="cm-identifier">simple</span> <span class="cm-number">123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在接口配置用户名和密码，密码明文密文显示simple/cipher</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">完成后重启接口生效</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">shutdown</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Seria1</span><span class="cm-operator">/</span><span class="cm-number">0l</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">undo</span> <span class="cm-identifier">shutdown</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#接口重启</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 412px;"></div><div class="CodeMirror-gutters" style="display: none; height: 412px;"></div></div></div></pre><h4 id='chap密文认证'><span>CHAP密文认证</span></h4><p><font color=red><span>三次握手，交互密文报文，可靠</span></font></p><blockquote><p><span>工作过程</span></p><ol start='' ><li><span>由认证方主动发送报文，携带ID、随机数、认证方用户名</span></li><li><span>被认证方收到后，会提取ID、随机数与自己的密码进行MD5</span>
<span>把MD5结果+被认证方用户名+ID</span></li><li><span>认证方收到后，提取ID与用户名，查询对应的随机数与密码，与ID一起进行MD5计算</span>
<span>判断计算的MD5结果是否相同，相同则认证成功，不同认证失败</span>
<span>注：</span><mark><span>MD5是不可逆算法</span></mark></li></ol></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">认证方配置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">s1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">chap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#选择认证模式-chap模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">aaa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#进入aaa模式，只需要创建用户名和密码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span><span class="cm-identifier">local-user</span> <span class="cm-identifier">cwl</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-number">123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建数据库，保存用户的账户名和密码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">被认证方配置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">s1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">chap</span> <span class="cm-identifier">user</span> <span class="cm-identifier">cwl</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#接口用户名必须要有，接口密码不一定有</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">chap</span> <span class="cm-identifier">password</span> <span class="cm-identifier">simple</span> <span class="cm-number">123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在接口配置用户名和密码，密码明文密文显示simple/cipher</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">完成后重启接口生效</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Serial1</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">shutdown</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Seria1</span><span class="cm-operator">/</span><span class="cm-number">0l</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">undo</span> <span class="cm-identifier">shutdown</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 435px;"></div><div class="CodeMirror-gutters" style="display: none; height: 435px;"></div></div></div></pre><h3 id='ncp网络层参数协商-ipcp'><span>NCP网络层参数协商-IPCP</span></h3><p><span>地址协商能力</span></p><h4 id='静态ipcp'><span>静态IPCP</span></h4><p><span>  依次判断对端地址是否合法（不是冲突地址，网络/广播地址）</span>
<span>  通过这个来学习对端地址的直连路由</span></p><h4 id='动态ipcp'><span>动态IPCP</span></h4><p><span>  通常用于PPoE动态分配地址</span></p><h3 id='pppoe'><span>PPPoE</span></h3><p><span>就是把PPP协议帧封装到以太网帧中</span>
<span>优势：既有以太网灵活组网的便利，又有PPP认证计费功能</span></p><p><span>客户端/服务器 C/S模型</span></p><h3 id='pppoe工作过程'><span>PPPoE工作过程</span></h3><blockquote><p><strong><span>1. 发现阶段</span></strong>
<span>主要通过报文去寻找PPPoE服务器建立会话</span>
<span>PADI报文：广播发送寻找服务器</span>
<span>PADO报文：服务器响应客户端信息</span>
<span>PADR报文：客户端请求建立会话</span>
<span>PADS报文：服务器同意建立会话，同时携带会话ID</span></p><p><strong><span>2. 会话阶段</span></strong>
<span>主要进行PPP链路协商（PPP建立过程）</span></p><p><strong><span>3. 终结阶段</span></strong>
<span>通过PADT请求中断连接，可随时中断</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.4375px; left: 12px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PPPoE</span><span class="cm-error">服务器配置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">interface</span> <span class="cm-identifier">Virtual-Template</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建虚拟模板</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Virtual-Template1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-number">192.168.1.1</span> <span class="cm-number">24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">给客户端分配具体地址</span><span class="cm-operator">/</span><span class="cm-error">地址池</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">pool</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool1</span><span class="cm-punctuation">]</span><span class="cm-identifier">network</span> <span class="cm-number">10.1.1.1</span> <span class="cm-identifier">mask</span> <span class="cm-number">24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-ip-pool1</span><span class="cm-punctuation">]</span><span class="cm-identifier">gate-way</span> <span class="cm-identifier">list</span> <span class="cm-number">10.1.1.254</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">remote</span> <span class="cm-identifier">address</span> <span class="cm-identifier">pool</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Virtual-Template1</span><span class="cm-punctuation">]</span><span class="cm-identifier">remote</span> <span class="cm-identifier">address</span> <span class="cm-number">10.1.1.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#给客户端分配具体地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Virtual-Template1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">authentication-mode</span> <span class="cm-identifier">chap</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置PPP认证，选择模式（确定为认证方）chap或pap都行</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-Virtual-Template1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">local-user</span> <span class="cm-identifier">server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#设置认证方的用户名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">aaa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-aaa</span><span class="cm-punctuation">]</span><span class="cm-identifier">local-user</span> <span class="cm-identifier">cwl</span> <span class="cm-identifier">password</span> <span class="cm-identifier">cipher</span> <span class="cm-number">123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R1-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">pppoe-server</span> <span class="cm-identifier">bind</span> <span class="cm-identifier">Virtual-Template</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在物理接口上进行绑定虚拟模板</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PPPoE</span><span class="cm-error">客户端配置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">Dialer</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建拨号接口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Dirler1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> <span class="cm-identifier">ppp-negotiate</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#获取服务器分配的地址</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Dirler1</span><span class="cm-punctuation">]</span><span class="cm-identifier">dialer</span> <span class="cm-identifier">user</span> <span class="cm-identifier">server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#指定服务器名称</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Dirler1</span><span class="cm-punctuation">]</span><span class="cm-identifier">dialer</span> <span class="cm-identifier">bondle</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#绑定拨号规则包(通常和接口序号相同)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">配置</span><span class="cm-identifier">PPP</span><span class="cm-error">认证</span><span class="cm-punctuation">(</span><span class="cm-error">被认证方</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Dirler1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">chap</span> <span class="cm-identifier">user</span> <span class="cm-identifier">cwl</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#被认证方用户名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-Dirler1</span><span class="cm-punctuation">]</span><span class="cm-identifier">ppp</span> <span class="cm-identifier">chap</span> <span class="cm-identifier">password</span> <span class="cm-identifier">simple</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#被认证方密码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">int</span> <span class="cm-identifier">g0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2-GigabitEthernet0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-punctuation">]</span><span class="cm-identifier">pppoe-cilent</span> <span class="cm-identifier">dial-bundle-number</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在物理接口上进行绑定拨号接口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">ip</span> <span class="cm-identifier">route-static</span> <span class="cm-number">0.0.0.0</span> <span class="cm-number">0</span> <span class="cm-identifier">Dialer</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#缺省路由</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">R2</span><span class="cm-punctuation">]</span><span class="cm-identifier">display</span> <span class="cm-identifier">pppoe-cilent</span> <span class="cm-identifier">session</span> <span class="cm-identifier">summary</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在客户端查看会话，PPPoE是否成功</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1029px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1029px;"></div></div></div></pre><div style="right:0;top:0;position:fixed;z-index:2">
  <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="250" src="https://music.163.com/outchain/player?type=0&amp;id=7529782357&amp;auto=1&amp;height=430"></iframe>
</div><p>&nbsp;</p></div></div>
</body>
</html>